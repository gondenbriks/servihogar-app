(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},75254,e=>{"use strict";var t=e.i(71645);let a=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=(0,t.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:n,iconNode:d,...o},x)=>(0,t.createElement)("svg",{ref:x,...s,width:r,height:r,stroke:e,strokeWidth:l?24*Number(i)/Number(r):i,className:a("lucide",c),...o},[...d.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(n)?n:[n]])),i=(e,s)=>{let i=(0,t.forwardRef)(({className:i,...l},c)=>(0,t.createElement)(r,{ref:c,iconNode:s,className:a(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i),...l}));return i.displayName=`${e}`,i};e.s(["default",()=>i],75254)},18566,(e,t,a)=>{t.exports=e.r(76562)},73375,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},17927,e=>{"use strict";let t=(0,e.i(88715).createClient)("https://bajynifnwzsicuxdxigk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhanluaWZud3pzaWN1eGR4aWdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NDUxOTUsImV4cCI6MjA4NDUyMTE5NX0.RCN56FnpfNlwZNpynKROKasTFT_ZYNIGfc2Zurvfbrk");e.s(["supabase",0,t])},95116,e=>{"use strict";let t=(0,e.i(75254).default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);e.s(["Wrench",()=>t],95116)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},26707,e=>{"use strict";let t=(0,e.i(75254).default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);e.s(["Smartphone",()=>t],26707)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},8251,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(17927),i=e.i(73375),l=e.i(75254);let c=(0,l.default)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),n=(0,l.default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),d=(0,l.default)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),o=(0,l.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var x=e.i(95116),p=e.i(84614),h=e.i(46897),m=e.i(26707),b=e.i(87316),f=e.i(72520);function u(){let e=(0,s.useRouter)(),l=(0,s.useParams)().id,[u,g]=(0,a.useState)(null),[y,j]=(0,a.useState)([]),[N,v]=(0,a.useState)(!0);(0,a.useEffect)(()=>{l&&k()},[l]);let k=async()=>{v(!0);try{let{data:e,error:t}=await r.supabase.from("service_orders").select(`
                    *,
                    client:clients(*),
                    equipment:equipment(*),
                    technician:technicians(*)
                `).eq("id",l).single();if(t)throw t;g(e);let{data:a,error:s}=await r.supabase.from("order_items").select(`
                    *,
                    part:parts(*)
                `).eq("order_id",l);if(s)throw s;j(a||[])}catch(e){console.error("Error fetching invoice details:",e)}finally{v(!1)}};return N?(0,t.jsxs)("div",{className:"bg-[#0a0c10] min-h-screen flex flex-col items-center justify-center text-white",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-[#135bec]/30 border-t-[#135bec] rounded-full animate-spin mb-4"}),(0,t.jsx)("p",{className:"text-sm font-bold opacity-50",children:"Generando vista previa..."})]}):u?(0,t.jsxs)("div",{className:"min-h-screen bg-[#0a0c10] text-white flex flex-col font-sans max-w-md mx-auto relative pb-40",children:[(0,t.jsxs)("header",{className:"p-4 flex items-center justify-between border-b border-gray-800 bg-[#0a0c10]/90 backdrop-blur-md sticky top-0 z-50",children:[(0,t.jsx)("button",{onClick:()=>e.back(),className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:(0,t.jsx)(i.ChevronLeft,{size:24})}),(0,t.jsx)("h1",{className:"text-lg font-black uppercase tracking-tight text-[#00d4ff]",children:"Factura Digital"}),(0,t.jsx)("button",{className:"p-2 hover:bg-gray-800 rounded-full transition-colors",children:(0,t.jsx)(c,{size:20,className:"text-gray-400"})})]}),(0,t.jsx)("main",{className:"flex-1 p-4 lg:p-6 overflow-y-auto",children:(0,t.jsxs)("div",{className:"bg-white text-[#1a202c] rounded-[2rem] shadow-2xl overflow-hidden relative p-8 min-h-[650px] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-4xl font-black text-[#0f172a] tracking-tighter leading-none mb-1",children:"FACTURA"}),(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-400",children:["#",u.order_number.split("-").pop()]}),(0,t.jsxs)("div",{className:"mt-3 bg-[#135bec] text-white text-[10px] font-black px-4 py-1.5 rounded-full inline-flex items-center gap-2 uppercase tracking-widest",children:[(0,t.jsx)(b.Calendar,{size:12}),new Date(u.created_at).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"text-right flex flex-col items-end",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-[#135bec] mb-2",children:[(0,t.jsx)(x.Wrench,{size:24}),(0,t.jsx)("span",{className:"font-black text-xl italic tracking-tighter",children:"ServiTech"})]}),(0,t.jsxs)("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest leading-tight text-right",children:["NIT: 900.123.456-7",(0,t.jsx)("br",{}),"Servicio Técnico Especializado"]})]})]}),(0,t.jsxs)("div",{className:"mb-8 p-5 bg-gray-50 rounded-3xl border border-gray-100",children:[(0,t.jsx)("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.2em] mb-4 border-b border-gray-200 pb-2",children:"Información del Cliente"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(p.User,{size:16,className:"text-[#135bec] mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:"Cliente"}),(0,t.jsx)("p",{className:"font-black text-[#0f172a] text-sm",children:u.client?.full_name})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(h.MapPin,{size:16,className:"text-[#135bec] mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:"Ubicación"}),(0,t.jsx)("p",{className:"font-bold text-[#0f172a] text-xs leading-snug",children:u.client?.address})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(x.Wrench,{size:14,className:"text-[#135bec] mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:"Equipo"}),(0,t.jsxs)("p",{className:"font-bold text-[#0f172a] text-xs",children:[u.equipment?.brand," ",u.equipment?.type]})]})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(m.Smartphone,{size:14,className:"text-[#135bec] mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[9px] text-gray-400 font-bold uppercase",children:"Contacto"}),(0,t.jsx)("p",{className:"font-bold text-[#0f172a] text-xs",children:u.client?.phone})]})]})]})]})]}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex text-[10px] font-black text-white bg-[#0f172a] p-3 rounded-t-2xl uppercase tracking-widest mb-1",children:[(0,t.jsx)("div",{className:"flex-1",children:"Concepto"}),(0,t.jsx)("div",{className:"w-20 text-right",children:"Importe"})]}),(0,t.jsxs)("div",{className:"border border-gray-100 rounded-b-2xl mb-6 bg-white overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-gray-50 group hover:bg-gray-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,t.jsx)("span",{className:"font-black text-[#0f172a] text-xs uppercase tracking-tight",children:"Servicio Técnico y Mano de Obra"}),(0,t.jsxs)("span",{className:"font-black text-[#0f172a] text-sm",children:["$",Number(u.labor_cost).toLocaleString()]})]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 leading-relaxed italic",children:u.reported_issue?`Reparaci\xf3n: ${u.reported_issue}`:"Diagnóstico y reparación general."})]}),y.map((e,a)=>(0,t.jsx)("div",{className:"p-4 border-b border-gray-50 bg-gray-50/30",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-bold text-[#0f172a] text-xs uppercase tracking-tight",children:e.part?.name}),(0,t.jsxs)("p",{className:"text-[9px] text-gray-400 font-bold",children:["CANT: ",e.quantity," • COD: ",e.part?.code]})]}),(0,t.jsxs)("span",{className:"font-black text-[#0f172a] text-sm",children:["$",(Number(e.price_at_time)*e.quantity).toLocaleString()]})]})},a))]})]}),(0,t.jsxs)("div",{className:"mt-auto space-y-6",children:[u.technician&&(0,t.jsxs)("div",{className:"flex items-center gap-4 bg-gray-50 p-4 rounded-3xl border border-gray-100",children:[(0,t.jsx)("div",{className:"size-12 bg-[#135bec]/10 rounded-2xl flex items-center justify-center text-[#135bec] border border-[#135bec]/10",children:(0,t.jsx)(p.User,{size:24})}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"text-[9px] text-gray-400 font-black uppercase tracking-widest",children:"Técnico Asignado"}),(0,t.jsx)("p",{className:"font-black text-[#0f172a] text-sm",children:u.technician.full_name}),(0,t.jsx)("p",{className:"text-gray-400 text-[9px] font-bold italic",children:u.technician.specialty||"Especialista en Línea Blanca"})]})]}),(0,t.jsxs)("div",{className:"bg-[#0f172a] p-6 rounded-3xl flex justify-between items-center shadow-xl shadow-[#0f172a]/20",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-[0.3em] mb-1",children:"Total a Pagar"}),(0,t.jsx)("p",{className:"text-sm font-bold text-white/50 lowercase tracking-tighter italic",children:"Liquidación final del servicio"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("span",{className:"text-3xl font-black text-white tracking-tighter",children:["$",Number(u.total_cost).toLocaleString()]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-1 text-[10px] text-[#00ff9d] font-black uppercase mt-1",children:[(0,t.jsx)(f.ArrowRight,{size:12}),"IVA Incluido"]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-100",children:[(0,t.jsxs)("h4",{className:"text-[9px] font-black text-gray-400 uppercase tracking-widest mb-2 flex items-center gap-2",children:[(0,t.jsx)(c,{size:10,className:"text-[#135bec]"}),"Garantía y Condiciones"]}),(0,t.jsxs)("p",{className:"text-[8px] text-gray-500 leading-relaxed text-justify italic",children:["Este servicio cuenta con una garantía de 90 días sobre mano de obra y partes instaladas.",u.warranty_expiration&&(0,t.jsxs)("span",{className:"block mt-1 font-bold text-[#135bec]",children:["Válida hasta: ",new Date(u.warranty_expiration).toLocaleDateString()]}),(0,t.jsx)("br",{}),"La empresa no se responsabiliza por fallas posteriores derivadas de fluctuaciones eléctricas o mal uso del equipo por parte del usuario final."]})]})]})]})}),(0,t.jsxs)("footer",{className:"bg-[#12141a]/95 backdrop-blur-3xl border-t border-white/5 p-5 fixed bottom-0 w-full max-w-md z-50 rounded-t-[2.5rem] shadow-[0_-20px_40px_rgba(0,0,0,0.5)]",children:[(0,t.jsxs)("button",{onClick:()=>{if(!u)return;let e=`Hola ${u.client?.full_name}, adjunto la factura de su servicio t\xe9cnico ${u.order_number} por un valor de $${Number(u.total_cost).toLocaleString()}. Gracias por confiar en ServiTech Pro.`;window.open(`https://wa.me/${u.client?.phone}?text=${encodeURIComponent(e)}`,"_blank")},className:"w-full bg-[#1ab05c] hover:bg-[#159a4f] text-white font-black py-4 rounded-2xl flex items-center justify-center gap-3 mb-4 shadow-lg shadow-[#1ab05c]/20 transition-all active:scale-[0.97]",children:[(0,t.jsx)(o,{size:20}),(0,t.jsx)("span",{className:"uppercase tracking-widest text-sm",children:"Enviar por WhatsApp"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("button",{className:"py-3.5 bg-gray-900 border border-white/5 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-gray-800 transition-colors",children:[(0,t.jsx)(n,{size:14,className:"text-gray-400"}),"PDF"]}),(0,t.jsxs)("button",{className:"py-3.5 bg-gray-900 border border-white/5 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-gray-800 transition-colors",children:[(0,t.jsx)(d,{size:14,className:"text-gray-400"}),"Imprimir"]})]})]})]}):(0,t.jsxs)("div",{className:"bg-[#0a0c10] min-h-screen flex flex-col items-center justify-center text-white p-6",children:[(0,t.jsx)("p",{className:"text-xl font-bold mb-4",children:"Orden no encontrada"}),(0,t.jsx)("button",{onClick:()=>e.back(),className:"text-[#135bec] font-bold",children:"Volver"})]})}e.s(["default",()=>u],8251)}]);