(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:n="",children:c,iconNode:d,...o},x)=>(0,t.createElement)("svg",{ref:x,...s,width:a,height:a,stroke:e,strokeWidth:l?24*Number(i)/Number(a):i,className:r("lucide",n),...o},[...d.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(c)?c:[c]])),i=(e,s)=>{let i=(0,t.forwardRef)(({className:i,...l},n)=>(0,t.createElement)(a,{ref:n,iconNode:s,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i),...l}));return i.displayName=`${e}`,i};e.s(["default",()=>i],75254)},18566,(e,t,r)=>{t.exports=e.r(76562)},73375,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},17927,e=>{"use strict";let t=(0,e.i(88715).createClient)("https://bajynifnwzsicuxdxigk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhanluaWZud3pzaWN1eGR4aWdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NDUxOTUsImV4cCI6MjA4NDUyMTE5NX0.RCN56FnpfNlwZNpynKROKasTFT_ZYNIGfc2Zurvfbrk");e.s(["supabase",0,t])},95116,e=>{"use strict";let t=(0,e.i(75254).default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);e.s(["Wrench",()=>t],95116)},95468,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],95468)},84614,e=>{"use strict";let t=(0,e.i(75254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],84614)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},25894,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(17927),i=e.i(73375),l=e.i(78583),n=e.i(75254);let c=(0,n.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var d=e.i(95468),o=e.i(63209);let x=(0,n.default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var p=e.i(27612),m=e.i(87316),u=e.i(84614),h=e.i(95116),b=e.i(70016);function g(){let e=(0,s.useRouter)(),[n,g]=(0,r.useState)([]),[f,y]=(0,r.useState)(!1),N=(0,r.useRef)(null),j=()=>{let e=[{Cedula:"12345678",Nombre:"Cliente Ejemplo",Telefono:"3001234567",Direccion:"Calle 10 # 5-20, Cali",Tipo:"Nevera",Marca:"Samsung",Serial:"SN-SAMS-9988",Falla:"No enfría la parte inferior",Fecha:new Date().toISOString().split("T")[0],Hora:"10:00",Prioridad:"NORMAL","Tipo Servicio":"REPAIR"},{Cedula:"87654321",Nombre:"Empresa ABC",Telefono:"3109876543",Direccion:"Av. Siempre Viva 123",Tipo:"Aire Acondicionado",Marca:"LG",Serial:"SN-LG-5544",Falla:"Mantenimiento preventivo anual",Fecha:new Date().toISOString().split("T")[0],Hora:"14:30",Prioridad:"URGENT","Tipo Servicio":"MAINTENANCE"}],t=b.utils.json_to_sheet(e),r=b.utils.book_new();b.utils.book_append_sheet(r,t,"Plantilla ServiTech"),b.writeFile(r,"Plantilla_Servicios_ServiTech.xlsx")},v=async()=>{y(!0);let e=[...n];for(let t=0;t<e.length;t++){let r=e[t];if("success"!==r.status){e[t].status="processing",g([...e]);try{let{data:s,error:i}=await a.supabase.from("clients").upsert({national_id:r.national_id,full_name:r.full_name,phone:r.phone,address:r.address,category:"REGULAR"},{onConflict:"national_id"}).select().single();if(i)throw i;let{data:l,error:n}=await a.supabase.from("equipment").upsert({client_id:s.id,type:r.equipment_type,brand:r.brand,model:"Estandar",serial_number:r.serial_number},{onConflict:"serial_number"}).select().single();if(n)throw n;let c=`${r.date}T${r.time}:00`,{error:d}=await a.supabase.from("service_orders").insert({client_id:s.id,equipment_id:l.id,status:"PENDING",reported_issue:r.reported_issue,service_type:r.service_type,priority:["LOW","NORMAL","HIGH","URGENT"].includes(r.priority)?r.priority:"NORMAL",scheduled_at:c,order_number:`ORD-${Math.floor(1e3+9e3*Math.random())}-IMP`});if(d)throw d;e[t].status="success"}catch(r){e[t].status="error",e[t].error=r.message}g([...e])}}y(!1)};return(0,t.jsxs)("div",{className:"bg-[#0a0c10] min-h-screen text-white font-sans max-w-2xl mx-auto pb-32",children:[(0,t.jsxs)("header",{className:"sticky top-0 z-50 bg-[#0a0c10]/80 backdrop-blur-xl p-6 border-b border-white/5 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>e.back(),className:"size-10 bg-gray-900 rounded-xl flex items-center justify-center border border-white/5",children:(0,t.jsx)(i.ChevronLeft,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-black tracking-tight",children:"Carga Masiva"}),(0,t.jsx)("p",{className:"text-[10px] text-[#135bec] font-black uppercase tracking-widest",children:"Excel / CSV a Supabase"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[0===n.length&&(0,t.jsxs)("button",{onClick:j,className:"flex items-center gap-2 bg-emerald-600/10 text-emerald-500 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest border border-emerald-500/20 hover:bg-emerald-600/20 transition-all",children:[(0,t.jsx)(l.FileText,{size:14}),"Plantilla"]}),n.length>0&&!f&&(0,t.jsxs)("button",{onClick:()=>g([]),className:"text-rose-500 font-bold text-xs flex items-center gap-2",children:[(0,t.jsx)(p.Trash2,{size:16})," Limpiar"]})]})]}),(0,t.jsx)("main",{className:"p-6",children:0===n.length?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{onClick:()=>N.current?.click(),className:"py-20 border-2 border-dashed border-white/10 rounded-[3rem] flex flex-col items-center justify-center bg-gray-900/20 cursor-pointer hover:border-[#135bec]/50 transition-all hover:bg-[#135bec]/5 group",children:[(0,t.jsx)("div",{className:"size-20 rounded-3xl bg-gray-900 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-2xl",children:(0,t.jsx)(c,{className:"text-[#135bec]",size:36})}),(0,t.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Sube tu Excel de Servicios"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 max-w-xs text-center px-4 font-medium",children:"Arr規範 tu archivo o haz clic para seleccionar. El sistema detectará automáticamente clientes, equipos y fallas."}),(0,t.jsx)("input",{type:"file",ref:N,onChange:e=>{let t=e.target.files?.[0];if(!t)return;let r=new FileReader;r.onload=e=>{try{let t=e.target?.result,r=b.read(t,{type:"binary"}),s=r.Sheets[r.SheetNames[0]],a=b.utils.sheet_to_json(s).map((e,t)=>({id:`row-${t}`,national_id:String(e.Cedula||e.ID||e.Identificacion||""),full_name:String(e.Nombre||e["Nombre Completo"]||""),phone:String(e.Telefono||""),address:String(e.Direccion||""),equipment_type:String(e.Tipo||e.Articulo||"Otros"),brand:String(e.Marca||"Genérica"),serial_number:String(e.Serial||e.Serie||`SN-AUTO-${Math.random().toString(36).substring(7)}`),reported_issue:String(e.Falla||e.Problema||"Revisión General"),service_type:String(e["Tipo Servicio"]||"REPAIR"),priority:String(e.Prioridad||"NORMAL").toUpperCase(),date:e.Fecha||new Date().toISOString().split("T")[0],time:e.Hora||"09:00",status:"idle"})).filter(e=>e.full_name&&e.national_id);g(a)}catch(e){alert("Error al leer el archivo: "+e.message)}},r.readAsBinaryString(t)},className:"hidden",accept:".xlsx, .xls, .csv"})]}),(0,t.jsxs)("button",{onClick:j,className:"w-full py-5 rounded-[2rem] border border-white/5 bg-gray-900/40 flex items-center justify-center gap-3 hover:bg-gray-900 transition-all group",children:[(0,t.jsx)("div",{className:"size-10 rounded-xl bg-emerald-500/10 flex items-center justify-center text-emerald-500 group-hover:scale-110 transition-transform",children:(0,t.jsx)(l.FileText,{size:20})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("p",{className:"text-sm font-bold",children:"¿No tienes la plantilla?"}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Descarga el modelo oficial aquí"})]})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6 bg-indigo-600/10 border border-indigo-500/20 p-4 rounded-3xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm font-bold",children:[n.length," registros detectados"]}),(0,t.jsx)("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Listo para importar a la lista"})]}),(0,t.jsxs)("button",{onClick:v,disabled:f,className:"bg-[#135bec] text-white px-6 py-3 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2 shadow-xl shadow-[#135bec]/20",children:[f?(0,t.jsx)("div",{className:"size-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,t.jsx)(x,{size:16}),"Iniciar Proceso"]})]}),(0,t.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,t.jsxs)("div",{className:`p-5 rounded-[2rem] border transition-all ${"success"===e.status?"bg-emerald-500/10 border-emerald-500/30":"error"===e.status?"bg-rose-500/10 border-rose-500/30":"processing"===e.status?"bg-indigo-500/10 border-indigo-500 animate-pulse":"bg-gray-900/40 border-white/5"}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:`size-12 rounded-xl flex items-center justify-center font-black ${"success"===e.status?"bg-emerald-500 text-white":"bg-gray-800 text-gray-400"}`,children:(0,t.jsx)(u.User,{size:20})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-bold text-sm",children:e.full_name}),(0,t.jsx)("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:e.national_id})]})]}),"success"===e.status&&(0,t.jsx)(d.CheckCircle2,{className:"text-emerald-500",size:20}),"error"===e.status&&(0,t.jsx)(o.AlertCircle,{className:"text-rose-500",size:20})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,t.jsxs)("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 text-[10px] flex items-center gap-2",children:[(0,t.jsx)(h.Wrench,{size:12,className:"text-[#135bec]"}),(0,t.jsxs)("span",{className:"font-bold",children:[e.equipment_type," ",e.brand]})]}),(0,t.jsxs)("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 text-[10px] flex items-center gap-2",children:[(0,t.jsx)(m.Calendar,{size:12,className:"text-rose-500"}),(0,t.jsxs)("span",{className:"font-bold",children:[e.date," ",e.time]})]})]}),(0,t.jsxs)("p",{className:"text-[11px] text-gray-400 line-clamp-2 px-1 mb-2",children:[(0,t.jsx)("span",{className:"font-black text-gray-600 uppercase tracking-tighter mr-2",children:"Falla:"}),e.reported_issue]}),e.error&&(0,t.jsxs)("p",{className:"text-[9px] text-rose-500 font-bold mt-2 bg-rose-500/10 p-2 rounded-lg",children:["Error: ",e.error]})]},e.id))})]})})]})}e.s(["default",()=>g],25894)}]);