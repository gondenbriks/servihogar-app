(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63488,e=>{"use strict";let t=(0,e.i(75254).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);e.s(["Mail",()=>t],63488)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],43432)},61911,e=>{"use strict";let t=(0,e.i(75254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],61911)},25652,e=>{"use strict";let t=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],25652)},2153,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(18566),r=e.i(46932),i=e.i(88653),l=e.i(39616);let n=(0,e.i(75254).default)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);var c=e.i(61911),o=e.i(95116),d=e.i(25652),x=e.i(46897),m=e.i(43432),h=e.i(63488),p=e.i(17927),u=e.i(33302);function b(){let e=(0,s.useRouter)(),[b,f]=(0,a.useState)(!0),[g,y]=(0,a.useState)(!1),[v,w]=(0,a.useState)(!1),[j,k]=(0,a.useState)(null),[N,_]=(0,a.useState)([]),[z,M]=(0,a.useState)({employees:0,services:0,earnings:"0"}),[C,A]=(0,a.useState)(!1),[S,E]=(0,a.useState)({type:"",account_number:"",bank_name:"",holder_name:""});(0,a.useEffect)(()=>{T()},[]);let T=async()=>{f(!0);try{let{data:e,error:t}=await p.supabase.from("business_profiles").select("*").limit(1);if(t)throw t;if(e&&e.length>0){let t=e[0];k(t);let{data:a}=await p.supabase.from("payment_methods").select("*").eq("business_id",t.id);_(a||[])}P()}catch(e){console.error("Error loading profile data:",e)}finally{f(!1)}},P=async()=>{try{let{count:e}=await p.supabase.from("technicians").select("*",{count:"exact",head:!0}),{data:t,count:a}=await p.supabase.from("service_orders").select("total_cost",{count:"exact"}),s=t?.reduce((e,t)=>e+(Number(t.total_cost)||0),0)||0;M({employees:e||0,services:a||0,earnings:s>1e3?`${(s/1e3).toFixed(1)}k`:`${s}`})}catch(e){console.error("Error fetching stats:",e)}},U=async()=>{if(j){y(!0);try{let{error:e}=await p.supabase.from("business_profiles").update({name:j.name,tax_id:j.tax_id,address:j.address,phone:j.phone,email:j.email}).eq("id",j.id);if(e)throw e;w(!1)}catch(e){console.error("Error updating profile:",e),alert("Error al guardar el perfil")}finally{y(!1)}}},$=async()=>{if(S.type&&j){y(!0);try{let{data:e,error:t}=await p.supabase.from("payment_methods").insert([{business_id:j.id,type:S.type,bank_name:S.bank_name,account_number:S.account_number,holder_name:S.holder_name,is_active:!0}]).select();if(t)throw t;e&&_(t=>[...t,e[0]]),A(!1),E({type:"",account_number:"",bank_name:"",holder_name:""})}catch(e){console.error("Error adding payment method:",e),alert("Error al agregar el método de pago")}finally{y(!1)}}};return b?(0,t.jsxs)("div",{className:"bg-[#050608] min-h-screen flex flex-col items-center justify-center text-white font-sans",children:[(0,t.jsx)("div",{className:"w-10 h-10 border-2 border-primary/20 border-t-primary rounded-full animate-spin mb-4"}),(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-50",children:"Sincronizando..."})]}):(0,t.jsxs)("div",{className:"bg-[#050608] min-h-screen text-white pb-24 max-w-5xl mx-auto font-sans overflow-x-hidden relative border-x border-white/5",children:[(0,t.jsx)(u.default,{title:"Corporativo",showBack:!0,rightElement:(0,t.jsx)(r.motion.button,{whileTap:{scale:.9},onClick:()=>e.push("/settings"),className:"size-11 flex items-center justify-center rounded-2xl bg-white/5 border border-white/10",children:(0,t.jsx)(l.Settings,{size:20})})}),(0,t.jsxs)("div",{className:"relative h-48 w-full",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-[#135bec]/20 to-transparent z-0"}),(0,t.jsx)("div",{className:"absolute -bottom-12 left-0 w-full px-6 z-10",children:(0,t.jsxs)("div",{className:"flex items-end gap-5",children:[(0,t.jsx)("div",{className:"size-24 rounded-[2rem] bg-[#0a0c12] border-4 border-[#050608] shadow-2xl flex items-center justify-center",children:(0,t.jsx)(n,{size:40,className:"text-[#135bec]"})}),(0,t.jsxs)("div",{className:"flex-1 pb-2",children:[(0,t.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-[#135bec]",children:"EMPRESA VERIFICADA"}),(0,t.jsx)("h1",{className:"text-xl font-black text-white leading-none mt-1",children:j.name})]})]})})]}),(0,t.jsxs)("main",{className:"mt-16 px-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center bg-white/[0.02] border border-white/5 p-5 rounded-3xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:"ID FISCAL"}),(0,t.jsx)("p",{className:"text-xs text-gray-400 font-mono mt-1",children:j.tax_id||"N/A"})]}),(0,t.jsx)(r.motion.button,{whileTap:{scale:.95},onClick:()=>v?U():w(!0),className:`px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest ${v?"bg-emerald-500 text-white":"bg-[#135bec] text-white"}`,children:g?"...":v?"Guardar":"Editar"})]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[{label:"Técnicos",val:z.employees,icon:(0,t.jsx)(c.Users,{size:20}),color:"text-cyan-400",bg:"bg-cyan-400/10"},{label:"Servicios",val:z.services,icon:(0,t.jsx)(o.Wrench,{size:20}),color:"text-orange-400",bg:"bg-orange-400/10"},{label:"Ingresos",val:`$${z.earnings}`,icon:(0,t.jsx)(d.TrendingUp,{size:20}),color:"text-emerald-400",bg:"bg-emerald-400/10"}].map((e,a)=>(0,t.jsxs)("div",{className:"bg-white/[0.02] p-5 rounded-[2rem] border border-white/5 flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:`size-10 rounded-xl ${e.bg} ${e.color} flex items-center justify-center mb-2`,children:e.icon}),(0,t.jsx)("span",{className:"text-lg font-black text-white",children:e.val}),(0,t.jsx)("span",{className:"text-[9px] text-gray-500 uppercase font-black",children:e.label})]},a))}),(0,t.jsxs)("section",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] px-2",children:"Información de Contacto"}),(0,t.jsx)("div",{className:"bg-white/[0.02] rounded-[2.5rem] p-6 border border-white/5 space-y-6",children:[{label:"Dirección",val:j.address,icon:(0,t.jsx)(x.MapPin,{size:18}),key:"address"},{label:"Teléfono",val:j.phone,icon:(0,t.jsx)(m.Phone,{size:18}),key:"phone"},{label:"Email",val:j.email,icon:(0,t.jsx)(h.Mail,{size:18}),key:"email"}].map((e,a)=>(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"size-10 rounded-2xl bg-[#0a0c12] border border-white/5 flex items-center justify-center text-gray-500",children:e.icon}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-widest",children:e.label}),v?(0,t.jsx)("input",{value:e.val||"",onChange:t=>k({...j,[e.key]:t.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl p-2.5 text-xs text-white mt-1"}):(0,t.jsx)("p",{className:"text-sm text-gray-200 font-medium mt-1",children:e.val||"---"})]})]},a))})]})]}),(0,t.jsx)(i.AnimatePresence,{children:C&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[(0,t.jsx)(r.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>A(!1),className:"absolute inset-0 bg-black/80 backdrop-blur-md"}),(0,t.jsxs)(r.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-[#0a0c12] w-full max-w-sm rounded-[2.5rem] border border-white/10 p-8 relative z-10",children:[(0,t.jsx)("h3",{className:"font-black text-white uppercase tracking-widest text-xs mb-6",children:"Nuevo Método de Pago"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{placeholder:"Tipo (Zelle, Nequi...)",value:S.type,onChange:e=>E({...S,type:e.target.value}),className:"w-full bg-[#050608] border border-white/5 rounded-2xl p-4 text-xs text-white"}),(0,t.jsx)("input",{placeholder:"Banco",value:S.bank_name,onChange:e=>E({...S,bank_name:e.target.value}),className:"w-full bg-[#050608] border border-white/5 rounded-2xl p-4 text-xs text-white"}),(0,t.jsx)("input",{placeholder:"Número de cuenta",value:S.account_number,onChange:e=>E({...S,account_number:e.target.value}),className:"w-full bg-[#050608] border border-white/5 rounded-2xl p-4 text-xs text-white"}),(0,t.jsx)("input",{placeholder:"Titular",value:S.holder_name,onChange:e=>E({...S,holder_name:e.target.value}),className:"w-full bg-[#050608] border border-white/5 rounded-2xl p-4 text-xs text-white"}),(0,t.jsx)("button",{onClick:$,className:"w-full py-4 bg-[#135bec] rounded-2xl font-black text-white uppercase tracking-widest text-[10px] mt-4",children:"Vincular Método"})]})]})]})})]})}e.s(["default",()=>b],2153)}]);