(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},89853,e=>{"use strict";let t=(0,e.i(75254).default)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);e.s(["CalendarDays",()=>t],89853)},65374,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(17927),l=e.i(55436),i=e.i(37727),c=e.i(89853);let n=(0,e.i(75254).default)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var o=e.i(84614),d=e.i(95116),b=e.i(3116),x=e.i(46897),u=e.i(7233),p=e.i(46932),h=e.i(88653),m=e.i(33302);function g(){let e,g=(0,r.useRouter)(),[y,f]=(0,a.useState)("all"),[w,v]=(0,a.useState)(new Date().toISOString().split("T")[0]),[j,N]=(0,a.useState)(""),[k,S]=(0,a.useState)("all"),[_,D]=(0,a.useState)([]),[E,M]=(0,a.useState)(!0),[C,P]=(0,a.useState)([]);(0,a.useEffect)(()=>{T(),z()},[]);let z=async()=>{let{data:e}=await s.supabase.from("technicians").select("*").order("full_name");P(e||[])},T=async()=>{M(!0);try{let{data:e,error:t}=await s.supabase.from("service_orders").select("*, clients(full_name, address), technicians(full_name)").order("scheduled_at",{ascending:!0});if(t)throw t;D(e||[])}catch(e){console.error("Error loading services:",e)}finally{M(!1)}},L=(()=>{let e=[],t=new Date;for(let a=-2;a<7;a++){let r=new Date(t);r.setDate(t.getDate()+a);let s=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"];e.push({day:s[r.getDay()],date:r.getDate(),fullDate:r.toISOString().split("T")[0]})}return e})(),R=_.filter(e=>{if("all"!==y&&e.status!==({active:"IN_PROGRESS",pending:"PENDING",completed:"COMPLETED",new:"NEW"})[y]||w&&e.scheduled_at?.split("T")[0]!==w||"all"!==k&&e.technician_id!==k)return!1;let t=j.toLowerCase();return e.clients?.full_name?.toLowerCase().includes(t)||e.reported_issue?.toLowerCase().includes(t)||e.clients?.address?.toLowerCase().includes(t)}),I=(e={all:0,active:0,pending:0,completed:0,new:0},_.forEach(t=>{t.scheduled_at?.split("T")[0]===w&&(e.all++,"IN_PROGRESS"===t.status&&e.active++,"PENDING"===t.status&&e.pending++,"COMPLETED"===t.status&&e.completed++,"NEW"===t.status&&e.new++)}),e);return(0,t.jsxs)("div",{className:"bg-[#0a0c10] min-h-screen text-white font-sans max-w-5xl mx-auto relative overflow-x-hidden border-x border-white/5 pb-24",children:[(0,t.jsx)(m.default,{title:"Agenda",showBack:!0}),(0,t.jsxs)("div",{className:"pt-8 pb-4 px-6 border-b border-white/5 bg-[#0a0c10]",children:[(0,t.jsxs)("div",{className:"space-y-6 relative z-10",children:[(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)(l.Search,{className:"absolute left-5 top-1/2 -translate-y-1/2 text-gray-700 group-focus-within:text-[#135bec] transition-colors",size:18}),(0,t.jsx)("input",{type:"text",placeholder:"Buscar cliente...",value:j,onChange:e=>N(e.target.value),className:"w-full bg-gray-900/40 border border-white/5 rounded-[1.8rem] py-5 pl-14 pr-12 text-sm text-white placeholder-gray-700 focus:outline-none focus:border-[#135bec]/50 focus:bg-gray-900/80 transition-all shadow-inner"}),j&&(0,t.jsx)("button",{onClick:()=>N(""),className:"absolute right-5 top-1/2 -translate-y-1/2 text-gray-600 hover:text-white transition-colors",children:(0,t.jsx)(i.X,{size:18})})]}),(0,t.jsx)("div",{className:"flex gap-3 overflow-x-auto no-scrollbar py-2 -mx-1 px-1",children:L.map(e=>{let a=w===e.fullDate;return(0,t.jsxs)(p.motion.button,{whileTap:{scale:.95},onClick:()=>v(e.fullDate),className:`shrink-0 flex flex-col items-center justify-center min-w-[68px] h-[90px] rounded-[1.5rem] transition-all duration-500 relative overflow-hidden group border ${a?"bg-[#135bec] border-[#135bec] text-white shadow-[0_15px_30px_rgba(19,91,236,0.25)]":"bg-gray-900/40 border-white/5 text-gray-500 hover:bg-gray-800/60"}`,children:[a&&(0,t.jsx)(p.motion.div,{layoutId:"date-glow",className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent pointer-events-none"}),(0,t.jsx)("span",{className:`text-[9px] font-black uppercase tracking-widest mb-1.5 ${a?"text-white/80":"text-gray-600"}`,children:e.day}),(0,t.jsx)("span",{className:"text-2xl font-black tabular-nums",children:e.date})]},e.fullDate)})})]}),(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto no-scrollbar py-4 mt-2",children:[{id:"all",label:"Todos",count:I.all},{id:"active",label:"En Ruta",count:I.active},{id:"pending",label:"Pendientes",count:I.pending},{id:"completed",label:"Listos",count:I.completed}].map(e=>(0,t.jsxs)(p.motion.button,{whileTap:{scale:.97},onClick:()=>f(e.id),className:`px-5 py-3 rounded-2xl text-[9px] font-black uppercase tracking-[0.2em] transition-all border shrink-0 flex items-center gap-3 ${y===e.id?"bg-white text-black border-white shadow-lg":"bg-gray-900/60 border-white/5 text-gray-500"}`,children:[e.label,(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-lg text-[8px] ${y===e.id?"bg-black/10":"bg-white/5"}`,children:e.count})]},e.id))})]}),(0,t.jsxs)("main",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"bg-gray-900/20 border border-white/5 rounded-[2.5rem] p-4 flex items-center justify-between shadow-inner",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"size-10 rounded-2xl bg-[#135bec]/10 flex items-center justify-center text-[#135bec] border border-[#135bec]/20",children:(0,t.jsx)(n,{size:18})}),(0,t.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"bg-transparent text-[10px] font-black uppercase tracking-widest text-[#135bec] outline-none cursor-pointer appearance-none pr-6",children:[(0,t.jsx)("option",{value:"all",className:"bg-[#0a0c10]",children:"Flota Completa"}),C.map(e=>(0,t.jsx)("option",{value:e.id,className:"bg-[#0a0c10]",children:e.full_name},e.id))]})]})}),E?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-32 space-y-4",children:[(0,t.jsx)("div",{className:"size-14 border-4 border-[#135bec]/10 border-t-[#135bec] rounded-full animate-spin"}),(0,t.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#135bec] animate-pulse",children:"Sincronizando..."})]}):0===R.length?(0,t.jsxs)(p.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-32 text-gray-700 bg-gray-900/10 border-2 border-dashed border-white/5 rounded-[4rem] text-center px-10",children:[(0,t.jsx)(c.CalendarDays,{size:64,className:"mb-6 opacity-20"}),(0,t.jsx)("h3",{className:"font-black text-lg text-gray-500 tracking-tight mb-2",children:"Sin actividad"})]}):(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)(h.AnimatePresence,{children:R.map((e,a)=>{let r=(e=>{switch(e){case"IN_PROGRESS":return{label:"En Proceso",color:"text-[#00ff9d]",bg:"bg-[#00ff9d]/10",border:"border-[#00ff9d]/20"};case"PENDING":return{label:"Pendiente",color:"text-amber-400",bg:"bg-amber-400/10",border:"border-amber-400/20"};case"COMPLETED":return{label:"Listo",color:"text-gray-400",bg:"bg-gray-400/10",border:"border-gray-400/20"};case"DELIVERED":return{label:"Entregado",color:"text-indigo-400",bg:"bg-indigo-400/10",border:"border-indigo-400/20"};default:return{label:e,color:"text-blue-400",bg:"bg-blue-400/10",border:"border-blue-400/20"}}})(e.status);return(0,t.jsxs)(p.motion.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.1*a},onClick:()=>g.push(`/service-orders/${e.id}`),className:"group relative bg-gray-900/30 border border-white/5 rounded-[3rem] p-7 shadow-2xl active:scale-[0.98] transition-all cursor-pointer overflow-hidden hover:bg-gray-900/50 hover:border-[#135bec]/20",children:[(0,t.jsx)("div",{className:`absolute left-0 top-10 bottom-10 w-1.5 rounded-r-full ${r.color.replace("text-","bg-")}`}),(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,t.jsx)("span",{className:`px-4 py-2 rounded-2xl text-[8px] font-black uppercase tracking-[0.2em] border backdrop-blur-md ${r.bg} ${r.color} ${r.border}`,children:r.label})}),(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-black/40 px-4 py-2 rounded-2xl border border-white/5 text-[9px] font-black text-gray-400 uppercase tracking-widest",children:[(0,t.jsx)(o.User,{size:12,className:"text-[#135bec]"}),e.technicians?.full_name?.split(" ")[0]||"Gral"]})]}),(0,t.jsxs)("div",{className:"flex gap-6 items-center mb-8",children:[(0,t.jsx)("div",{className:"size-16 rounded-[1.5rem] bg-gray-900 border border-white/10 flex items-center justify-center text-[#135bec] shadow-inner group-hover:bg-[#135bec]/10 transition-colors",children:(0,t.jsx)(d.Wrench,{size:32})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-xl font-black tracking-tight text-white truncate",children:e.clients?.full_name}),(0,t.jsx)("p",{className:"text-[11px] text-gray-500 font-bold uppercase tracking-[0.1em] truncate italic opacity-80 mt-1",children:e.reported_issue||"Servicio Técnico"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white/[0.03] rounded-[1.5rem] p-4 border border-white/5 flex items-center gap-4",children:[(0,t.jsx)(b.Clock,{size:16,className:"text-[#135bec]"}),(0,t.jsx)("span",{className:"text-sm font-black text-gray-200 tabular-nums",children:e.scheduled_at?new Date(e.scheduled_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"24/7"})]}),(0,t.jsxs)("div",{className:"bg-white/[0.03] rounded-[1.5rem] p-4 border border-white/5 flex items-center gap-4 overflow-hidden",children:[(0,t.jsx)(x.MapPin,{size:16,className:"text-rose-500"}),(0,t.jsx)("span",{className:"text-xs font-black text-gray-200 truncate",children:e.clients?.address||"Mendoza"})]})]})]},e.id)})})})]}),(0,t.jsx)(p.motion.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>g.push("/new-service"),className:"fixed bottom-8 right-8 size-16 rounded-full bg-[#135bec] text-white shadow-[0_20px_40px_rgba(19,91,236,0.4)] flex items-center justify-center z-[100] border-2 border-white/10",children:(0,t.jsx)(u.Plus,{size:32})})]})}e.s(["default",()=>g,"dynamic",0,"force-dynamic"],65374)}]);