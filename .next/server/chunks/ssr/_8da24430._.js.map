{"version":3,"sources":["../../../../app/actions/personalized-message.ts","../../../../.next-internal/server/app/clients/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["\"use server\";\r\n\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\nconst genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY || \"\");\r\n\r\nexport async function generatePersonalizedMessage(\r\n    clientName: string,\r\n    appliance: string,\r\n    topic: 'maintenance' | 'promo' | 'payment' | 'general' = 'maintenance'\r\n): Promise<string> {\r\n    const model = genAI.getGenerativeModel({\r\n        model: \"gemini-1.5-flash\",\r\n    });\r\n\r\n    let topicContext = \"\";\r\n    switch (topic) {\r\n        case 'maintenance': topicContext = \"Recordarle que su equipo requiere mantenimiento preventivo.\"; break;\r\n        case 'promo': topicContext = \"Ofrecerle un 20% de descuento en su pr√≥xima reparaci√≥n.\"; break;\r\n        case 'payment': topicContext = \"Aviso cordial sobre un pago pendiente de su √∫ltimo servicio.\"; break;\r\n        case 'general': topicContext = \"Informarle que tenemos disponibilidad inmediata para revisi√≥n t√©cnica.\"; break;\r\n    }\r\n\r\n    const prompt = `Act√∫a como 'ServiBot' ü§ñ. Redacta un mensaje s√∫per corto (m√°ximo 25 palabras) y muy amistoso para \"${clientName}\".\r\n        Contexto: ${topicContext}\r\n        Equipo: ${appliance || 'equipo'}.\r\n        Tono: Muy amable, fresco y breve. Usa emojis. No pongas \"Asunto:\". S√© directo.`;\r\n\r\n    try {\r\n        const result = await model.generateContent(prompt);\r\n        const response = await result.response;\r\n        return response.text();\r\n    } catch (error) {\r\n        console.error(\"Error in Gemini Personalized Message Action:\", error);\r\n        return `¬°Hola ${clientName}! üòä Le recordamos que es tiempo del mantenimiento para su ${appliance || 'equipo'}. ¬°Escr√≠banos para agendar! üõ†Ô∏è‚ú®`;\r\n    }\r\n}\r\n","export {generatePersonalizedMessage as '70123382b1b28ff7b6651829fe7748b5e33f11b69a'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,oBAEA,IAAM,EAAQ,IAAI,EAAA,kBAAkB,CAAC,QAAQ,GAAG,CAAC,cAAc,EAAI,IAE5D,eAAe,EAClB,CAAkB,CAClB,CAAiB,CACjB,EAAyD,aAAa,EAEtE,IAAM,EAAQ,EAAM,kBAAkB,CAAC,CACnC,MAAO,kBACX,GAEI,EAAe,GACnB,OAAQ,GACJ,IAAK,cAAe,EAAe,8DAA+D,KAClG,KAAK,QAAS,EAAe,0DAA2D,KACxF,KAAK,UAAW,EAAe,+DAAgE,KAC/F,KAAK,UAAW,EAAe,wEACnC,CAEA,IAAM,EAAS,CAAC,4GAAmG,EAAE,EAAW;kBAClH,EAAE,aAAa;gBACjB,EAAE,GAAa,SAAS;yFAC8C,CAAC,CAEnF,GAAI,CACA,IAAM,EAAS,MAAM,EAAM,eAAe,CAAC,GAE3C,MAAO,CADU,MAAM,EAAO,QAAA,AAAQ,EACtB,IAAI,EACxB,CAAE,MAAO,EAAO,CAEZ,OADA,QAAQ,KAAK,CAAC,+CAAgD,GACvD,CAAC,SAAM,EAAE,EAAW,2DAA2D,EAAE,GAAa,SAAS,sCAAgC,CAAC,AACnJ,CACJ,iCA9BsB,IAAA,CAAA,EAAA,EAAA,uBAAA,EAAA,EAAA,6CAAA,uECNtB,IAAA,EAAA,EAAA,CAAA,CAAA"}