module.exports=[20731,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(78560),e=a.i(70106);let f=(0,e.default)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var g=a.i(41710),h=a.i(67453),i=a.i(56738),j=a.i(22520),k=a.i(15618),l=a.i(79808),m=a.i(24987),n=a.i(74566);let o=(0,e.default)("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);var p=a.i(1631);let q=(0,e.default)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),r=(0,e.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var s=a.i(43108),t=a.i(20005),u=a.i(82434),v=a.i(53722),w=a.i(60246),x=a.i(38246),y=a.i(50944),z=a.i(46271),A=a.i(62036),B=a.i(2084);function C(){let a=(0,y.useRouter)(),[e,C]=(0,c.useState)({totalBilled:0,pendingOrders:0,completedOrders:0,activeTechnicians:0}),[D,E]=(0,c.useState)(!0),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)("admin"),[L,M]=(0,c.useState)(!1);(0,c.useEffect)(()=>{N(),O()},[]);let N=async()=>{try{let{data:a}=await d.supabase.from("service_orders").select("total_cost").eq("status","DELIVERED"),b=a?.reduce((a,b)=>a+(Number(b.total_cost)||0),0)||0,{count:c}=await d.supabase.from("service_orders").select("*",{count:"exact",head:!0}).in("status",["PENDING","DIAGNOSIS","IN_PROGRESS"]),{count:e}=await d.supabase.from("service_orders").select("*",{count:"exact",head:!0}).eq("status","COMPLETED"),{count:f}=await d.supabase.from("technicians").select("*",{count:"exact",head:!0}).eq("is_active",!0);C({totalBilled:b,pendingOrders:c||0,completedOrders:e||0,activeTechnicians:f||0})}catch(a){console.error("Error fetching stats:",a)}finally{E(!1)}},O=async()=>{let{data:a}=await d.supabase.from("service_orders").select("*, client:clients(full_name), equipment:equipment(type, brand)").order("created_at",{ascending:!1}).limit(5);G(a||[])},P=({title:a,value:c,icon:d,color:e,restricted:f=!1,href:g})=>{let h=(0,b.jsxs)("div",{className:`h-full bg-gray-900/40 border border-white/5 p-6 rounded-[2.5rem] relative overflow-hidden group transition-all hover:border-white/10 ${f?"cursor-not-allowed opacity-80":"cursor-pointer active:scale-[0.98]"}`,children:[(0,b.jsx)("div",{className:`absolute -right-4 -top-4 size-32 ${e} opacity-5 blur-3xl group-hover:opacity-10 transition-opacity`}),(0,b.jsxs)("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[(0,b.jsx)("div",{className:`p-4 rounded-2xl ${e.replace("bg-","bg-")}/10 border border-white/5`,children:(0,b.jsx)(d,{size:24,className:e.replace("bg-","text-")})}),f?(0,b.jsx)(s.Lock,{size:16,className:"text-gray-700"}):(0,b.jsx)(j.ArrowUpRight,{size:18,className:"text-gray-600 group-hover:text-white transition-colors"})]}),(0,b.jsxs)("div",{className:"relative z-10",children:[(0,b.jsx)("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.2em] mb-1",children:a}),f?(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("div",{className:"h-6 w-24 bg-gray-800 rounded-lg animate-pulse"})}):(0,b.jsx)("h3",{className:"text-3xl font-black text-white tracking-tight",children:c})]}),f&&(0,b.jsx)("div",{className:"absolute inset-0 bg-[#0a0c10]/40 backdrop-blur-[2px] flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)("p",{className:"text-[8px] font-black uppercase tracking-widest text-gray-400 bg-black/80 px-3 py-1.5 rounded-full border border-white/10",children:"Solo Admin"})})]});return f||!g?h:(0,b.jsx)(x.default,{href:g,className:"block h-full",children:h})},Q=({icon:a,label:c,color:d,onClick:e})=>(0,b.jsxs)(z.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex items-center gap-4 group cursor-pointer pointer-events-auto",onClick:e,children:[(0,b.jsx)("span",{className:"bg-gray-900 border border-white/10 px-4 py-2 rounded-2xl text-[10px] font-black text-white shadow-2xl opacity-100 uppercase tracking-widest min-w-[120px] text-right",children:c}),(0,b.jsx)("div",{className:`size-14 rounded-2xl shadow-2xl flex items-center justify-center border border-white/10 ${d} active:scale-90 transition-all group-hover:scale-110`,children:(0,b.jsx)(a,{size:24,className:"text-white"})})]});return(0,b.jsxs)("div",{className:"min-h-screen bg-[#0a0c10] text-white font-sans relative overflow-x-hidden",children:[(0,b.jsx)(B.default,{title:"ServiTech Pro",rightElement:(0,b.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer bg-gray-900/50 hover:bg-gray-800/80 border border-white/5 rounded-full p-1 pr-3 transition-all group relative mr-2",onClick:()=>M(!L),children:[(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("div",{className:"size-8 rounded-full bg-gradient-to-br from-[#135bec] to-purple-600 flex items-center justify-center font-black text-xs border-background-dark shadow-xl",children:"CR"})}),(0,b.jsx)(r,{size:12,className:`text-gray-500 transition-transform duration-300 ${L?"rotate-180":""}`}),(0,b.jsx)(A.AnimatePresence,{children:L&&(0,b.jsxs)(z.motion.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"absolute top-12 right-0 w-48 bg-[#0a0c10] border border-white/10 rounded-3xl shadow-2xl p-2 z-[110]",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("button",{onClick:()=>{K("admin"===J?"technician":"admin"),M(!1)},className:"w-full flex items-center gap-3 p-3 hover:bg-gray-900 rounded-2xl transition-colors",children:[(0,b.jsx)("div",{className:"size-8 rounded-xl bg-gray-800 flex items-center justify-center text-gray-400",children:"admin"===J?(0,b.jsx)(p.Smartphone,{size:16}):(0,b.jsx)(q,{size:16})}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-gray-300",children:"Cambiar Rol"})]}),(0,b.jsx)("div",{className:"h-px bg-white/5 my-1"}),(0,b.jsxs)("button",{className:"w-full flex items-center gap-3 p-3 hover:bg-rose-500/10 text-rose-500 rounded-2xl transition-colors",children:[(0,b.jsx)("div",{className:"size-8 rounded-xl bg-rose-500/10 flex items-center justify-center",children:(0,b.jsx)(t.LogOut,{size:16})}),(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Cerrar Sesión"})]})]})})]})}),(0,b.jsx)("main",{className:"max-w-7xl mx-auto px-6 pt-8 pb-12",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-4 space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,b.jsx)("h2",{className:"text-xs font-black uppercase tracking-[0.2em] text-gray-500",children:"Resumen Ejecutivo"}),"admin"===J?(0,b.jsxs)(x.default,{href:"/finance",className:"text-[9px] font-black uppercase text-[#135bec] flex items-center gap-1",children:["Auditoría ",(0,b.jsx)(j.ArrowUpRight,{size:10})]}):(0,b.jsxs)("div",{className:"flex items-center gap-1 text-[9px] font-black uppercase text-gray-700",children:[(0,b.jsx)(s.Lock,{size:10})," Privado"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,b.jsx)(P,{title:"Ingresos Netos",value:`$${e.totalBilled.toLocaleString()}`,icon:i.Wallet,color:"bg-[#00ff9d]",restricted:"admin"!==J,href:"/finance"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(P,{title:"Pendientes",value:e.pendingOrders,icon:g.Clock,color:"bg-[#135bec]",href:"/agenda"}),(0,b.jsx)(P,{title:"Completados",value:e.completedOrders,icon:h.CheckCircle2,color:"bg-[#00d4ff]",href:"/agenda"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)(P,{title:"IA Predictiva",value:"94.2%",icon:f,color:"bg-purple-600"}),(0,b.jsx)(P,{title:"Equipo Staff",value:e.activeTechnicians,icon:w.Users,color:"bg-emerald-500",href:"/users"})]})]})]}),(0,b.jsxs)("div",{className:"lg:col-span-8 flex flex-col gap-10",children:[(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-5 px-2",children:[(0,b.jsx)("h2",{className:"text-xs font-black uppercase tracking-[0.2em] text-gray-500",children:"Logística de Hoy"}),(0,b.jsxs)(x.default,{href:"/logistics",className:"text-[10px] font-black text-[#00ff9d] uppercase tracking-widest flex items-center gap-2 bg-[#00ff9d]/5 px-3 py-1.5 rounded-full border border-[#00ff9d]/10 transition-colors hover:bg-[#00ff9d]/10",children:["Optimizar ",(0,b.jsx)(n.Navigation,{size:12})]})]}),(0,b.jsx)(x.default,{href:"/logistics",children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-[#135bec]/20 to-purple-600/10 border border-white/5 p-8 rounded-[3rem] relative overflow-hidden group active:scale-[0.99] transition-all shadow-2xl",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-64 h-full bg-[#135bec] opacity-5 blur-[100px] group-hover:opacity-10 transition-opacity"}),(0,b.jsxs)("div",{className:"relative z-10 flex items-center gap-8",children:[(0,b.jsx)("div",{className:"size-20 rounded-3xl bg-white text-[#135bec] flex items-center justify-center shadow-[0_20px_40px_rgba(255,255,255,0.15)] group-hover:scale-105 transition-transform duration-500",children:(0,b.jsx)(o,{size:40})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-2xl font-black tracking-tighter",children:"Centro de Rutas"}),(0,b.jsxs)("p",{className:"text-[11px] text-gray-400 font-bold uppercase tracking-[0.1em] mt-2 flex items-center gap-2",children:[(0,b.jsx)(m.MapPin,{size:12,className:"text-[#00ff9d]"})," ",e.pendingOrders," paradas inteligentes calculadas"]})]}),(0,b.jsx)("div",{className:"size-12 rounded-full border border-white/10 flex items-center justify-center text-white group-hover:bg-[#135bec] group-hover:border-[#135bec] transition-all",children:(0,b.jsx)(j.ArrowUpRight,{size:20})})]}),(0,b.jsx)("div",{className:"absolute -bottom-10 -right-10 opacity-5 pointer-events-none group-hover:opacity-10 transition-opacity duration-700",children:(0,b.jsx)("div",{className:"animate-pulse",children:(0,b.jsx)("svg",{width:"200",height:"200",viewBox:"0 0 200 200",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M10 100C10 50.2944 50.2944 10 100 10C149.706 10 190 50.2944 190 100C190 149.706 149.706 190 100 190",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"10 10"})})})})]})})]}),(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6 px-2",children:[(0,b.jsx)("h2",{className:"text-xs font-black uppercase tracking-[0.2em] text-gray-500",children:"Últimas Intervenciones"}),(0,b.jsxs)(x.default,{href:"/agenda",className:"text-[10px] font-black text-[#135bec] uppercase tracking-widest flex items-center gap-2 hover:bg-[#135bec]/5 px-3 py-1.5 rounded-full transition-colors",children:["Historial Completo ",(0,b.jsx)(j.ArrowUpRight,{size:12})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:F.map((a,c)=>{let d=a.warranty_expiration&&new Date(a.warranty_expiration)>new Date;return(0,b.jsx)(z.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*c},children:(0,b.jsx)(x.default,{href:`/service-orders/${a.id}`,children:(0,b.jsxs)("div",{className:"bg-gray-900/40 border border-white/5 p-5 rounded-[2.5rem] flex flex-col hover:bg-gray-800/80 hover:border-white/10 transition-all group relative overflow-hidden",children:[(0,b.jsx)("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${"COMPLETED"===a.status?"bg-[#00ff9d]":"bg-[#135bec]"} opacity-0 group-hover:opacity-100 transition-opacity`}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"size-14 rounded-2xl bg-gray-950 flex items-center justify-center text-[#135bec] group-hover:scale-110 transition-transform shadow-xl",children:(0,b.jsx)(l.Wrench,{size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-0.5",children:[(0,b.jsxs)("h4",{className:"text-sm font-black text-white truncate max-w-[120px]",children:[a.equipment?.brand||"Genérico"," ",a.equipment?.type]}),d&&(0,b.jsx)("span",{className:"bg-[#00ff9d]/10 text-[#00ff9d] text-[7px] px-1.5 py-0.5 rounded-md font-black uppercase border border-[#00ff9d]/20",children:"Garantía"})]}),(0,b.jsx)("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:a.client?.full_name})]})]}),(0,b.jsx)("span",{className:`text-[8px] px-2.5 py-1.5 rounded-xl font-black uppercase tracking-widest border transition-colors ${"COMPLETED"===a.status?"bg-[#00ff9d]/5 text-[#00ff9d] border-[#00ff9d]/20":"bg-[#135bec]/5 text-[#135bec] border-[#135bec]/20"}`,children:a.status})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-2 pt-4 border-t border-white/5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-600",children:[(0,b.jsx)(g.Clock,{size:12}),(0,b.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Hace 2 horas"})]}),(0,b.jsx)(j.ArrowUpRight,{size:16,className:"text-gray-700 group-hover:text-white transition-colors"})]})]})})},a.id)})})]})]})]})}),(0,b.jsxs)("div",{className:"fixed bottom-28 md:bottom-12 right-6 md:right-12 z-[100] flex flex-col items-end gap-6 pointer-events-none",children:[(0,b.jsx)(A.AnimatePresence,{children:H&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/40 backdrop-blur-[2px] z-[-1] pointer-events-auto",onClick:()=>I(!1)}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-6 h-auto",children:[(0,b.jsx)(Q,{icon:v.BookOpen,label:"Biblioteca",color:"bg-gray-900 border border-white/10",onClick:()=>{a.push("/library"),I(!1)}}),(0,b.jsx)(Q,{icon:p.Smartphone,label:"Escanear Equipo",color:"bg-gray-900 border border-white/10",onClick:()=>{a.push("/scanner"),I(!1)}}),(0,b.jsx)(Q,{icon:u.Bot,label:"Asistente IA",color:"bg-purple-600 shadow-purple-600/20",onClick:()=>{a.push("/ai-assistant"),I(!1)}}),(0,b.jsx)(Q,{icon:k.Plus,label:"Nuevo Servicio",color:"bg-[#135bec] shadow-[#135bec]/20",onClick:()=>{a.push("/new-service"),I(!1)}})]})]})}),(0,b.jsxs)("button",{onClick:()=>I(!H),className:`pointer-events-auto size-16 rounded-full shadow-2xl flex items-center justify-center transition-all duration-500 z-[110] relative overflow-hidden group ${H?"bg-gray-900 border border-white/20 rotate-[135deg]":"bg-[#135bec] hover:scale-110 active:scale-90"}`,children:[!H&&(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-tr from-[#135bec] to-purple-500 opacity-0 group-hover:opacity-100 transition-opacity"}),(0,b.jsx)(k.Plus,{size:32,className:`relative z-10 text-white transition-opacity ${H?"opacity-60":"opacity-100"}`})]})]})]})}a.s(["default",()=>C],20731)}];

//# sourceMappingURL=app_dashboard_page_tsx_42ef5b16._.js.map