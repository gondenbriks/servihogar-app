{"version":3,"sources":["../../../../app/clients/page.tsx","../../../../node_modules/lucide-react/src/icons/filter.ts"],"sourcesContent":["'use client';\r\n\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { generatePersonalizedMessage } from '../actions/personalized-message';\r\nimport { Client } from '../../types/index';\r\nimport {\r\n    Search,\r\n    UserPlus,\r\n    Filter,\r\n    X,\r\n    Check,\r\n    CheckCircle2,\r\n    AlertTriangle,\r\n    History,\r\n    MessageCircle,\r\n    Sparkles,\r\n    Send,\r\n    User,\r\n    ChevronLeft,\r\n    FileText,\r\n    Upload\r\n} from 'lucide-react';\r\nimport * as XLSX from 'xlsx';\r\n\r\ntype FilterType = 'all' | 'expired' | 'upcoming' | 'ok';\r\n\r\ninterface PersonalizedMessage {\r\n    clientId: string;\r\n    clientName: string;\r\n    phone: string;\r\n    message: string;\r\n    status: 'pending' | 'generating' | 'ready' | 'sent';\r\n}\r\n\r\nexport default function ClientsPage() {\r\n    const router = useRouter();\r\n    const [isSelectionMode, setIsSelectionMode] = useState(false);\r\n    const [selectedClients, setSelectedClients] = useState<Set<string>>(new Set());\r\n    const [clients, setClients] = useState<any[]>([]);\r\n    const [lastSync, setLastSync] = useState<Date>(new Date());\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [activeFilter, setActiveFilter] = useState<FilterType>('all');\r\n\r\n    // Add Client Modal\r\n    const [showAddModal, setShowAddModal] = useState(false);\r\n    const [newClientForm, setNewClientForm] = useState({ national_id: '', name: '', phone: '', address: '' });\r\n\r\n    // Bulk Message State\r\n    const [showBulkMessageModal, setShowBulkMessageModal] = useState(false);\r\n    const [personalizedMessages, setPersonalizedMessages] = useState<PersonalizedMessage[]>([]);\r\n    const [isGenerating, setIsGenerating] = useState(false);\r\n    const [isImporting, setIsImporting] = useState(false);\r\n    const [bulkTopic, setBulkTopic] = useState<'maintenance' | 'promo' | 'payment' | 'general'>('maintenance');\r\n    const fileInputRef = React.useRef<HTMLInputElement>(null);\r\n\r\n    useEffect(() => {\r\n        loadClients();\r\n\r\n        // Real-time subscription\r\n        const channel = supabase\r\n            .channel('clients-changes')\r\n            .on('postgres_changes', { event: '*', schema: 'public', table: 'clients' }, () => {\r\n                loadClients();\r\n                setLastSync(new Date());\r\n            })\r\n            .subscribe();\r\n\r\n        return () => {\r\n            supabase.removeChannel(channel);\r\n        };\r\n    }, []);\r\n\r\n    const loadClients = async () => {\r\n        setIsLoading(true);\r\n        try {\r\n            // Fetch clients with their service orders and equipment to determine maintenance status\r\n            const { data, error } = await supabase\r\n                .from('clients')\r\n                .select(`\r\n                    *,\r\n                    service_orders (\r\n                        scheduled_at,\r\n                        equipment (\r\n                            type,\r\n                            brand\r\n                        )\r\n                    )\r\n                `)\r\n                .order('full_name');\r\n\r\n            if (error) throw error;\r\n\r\n            const mappedClients: any[] = (data || []).map((c: any) => {\r\n                // Find the most recent service order\r\n                const services = c.service_orders || [];\r\n                const sorted = services.sort((a: any, b: any) =>\r\n                    new Date(b.scheduled_at || 0).getTime() - new Date(a.scheduled_at || 0).getTime()\r\n                );\r\n                const lastService = sorted.length > 0 ? sorted[0] : null;\r\n\r\n                return {\r\n                    id: c.id,\r\n                    name: c.full_name,\r\n                    nationalId: c.national_id,\r\n                    phone: c.phone,\r\n                    address: c.address,\r\n                    category: c.category,\r\n                    lastServiceDate: lastService?.scheduled_at,\r\n                    lastAppliance: lastService?.equipment ? `${lastService.equipment.type} ${lastService.equipment.brand}` : undefined,\r\n                    initials: c.full_name.split(' ').map((n: string) => n[0]).join('').toUpperCase().substring(0, 2),\r\n                    color: 'bg-indigo-600'\r\n                };\r\n            });\r\n\r\n            setClients(mappedClients);\r\n        } catch (error) {\r\n            console.error('Error loading clients:', error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const getMaintenanceStatus = (lastDate?: string) => {\r\n        if (!lastDate) return { label: 'Sin Visitas', color: 'text-gray-500', bg: 'bg-gray-500/10', icon: History, status: 'ok' as FilterType };\r\n\r\n        const last = new Date(lastDate);\r\n        const now = new Date();\r\n        const diffInMonths = (now.getFullYear() - last.getFullYear()) * 12 + (now.getMonth() - last.getMonth());\r\n\r\n        if (diffInMonths >= 12) {\r\n            return { label: 'Mantenimiento Vencido', color: 'text-rose-500', bg: 'bg-rose-500/10', icon: AlertTriangle, status: 'expired' as FilterType };\r\n        } else if (diffInMonths >= 10) {\r\n            return { label: 'Próximo Vencimiento', color: 'text-amber-500', bg: 'bg-amber-500/10', icon: Filter, status: 'upcoming' as FilterType };\r\n        } else {\r\n            return { label: 'Al día', color: 'text-emerald-500', bg: 'bg-emerald-500/10', icon: CheckCircle2, status: 'ok' as FilterType };\r\n        }\r\n    };\r\n\r\n    const filteredClients = useMemo(() => {\r\n        return clients.filter(c => {\r\n            const queryMatch = c.name.toLowerCase().includes(searchQuery.toLowerCase()) || (c.nationalId && c.nationalId.includes(searchQuery));\r\n            if (!queryMatch) return false;\r\n\r\n            if (activeFilter === 'all') return true;\r\n            const maintenance = getMaintenanceStatus(c.lastServiceDate);\r\n            return maintenance.status === activeFilter;\r\n        });\r\n    }, [clients, searchQuery, activeFilter]);\r\n\r\n    const stats = useMemo(() => {\r\n        const counts = { all: clients.length, expired: 0, upcoming: 0, ok: 0 };\r\n        clients.forEach(c => {\r\n            const m = getMaintenanceStatus(c.lastServiceDate);\r\n            counts[m.status]++;\r\n        });\r\n        return counts;\r\n    }, [clients]);\r\n\r\n    const toggleSelectionMode = () => {\r\n        setIsSelectionMode(!isSelectionMode);\r\n        setSelectedClients(new Set());\r\n        setPersonalizedMessages([]);\r\n    };\r\n\r\n    const toggleClientSelection = (id: string, e: React.MouseEvent) => {\r\n        e.stopPropagation();\r\n        const newSelection = new Set(selectedClients);\r\n        if (newSelection.has(id)) {\r\n            newSelection.delete(id);\r\n        } else {\r\n            newSelection.add(id);\r\n        }\r\n        setSelectedClients(newSelection);\r\n    };\r\n\r\n    const selectAll = () => {\r\n        if (selectedClients.size === filteredClients.length) {\r\n            setSelectedClients(new Set());\r\n        } else {\r\n            setSelectedClients(new Set(filteredClients.map(c => c.id)));\r\n        }\r\n    };\r\n\r\n    const handleImportExcel = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        setIsImporting(true);\r\n        const reader = new FileReader();\r\n        reader.onload = async (evt) => {\r\n            try {\r\n                const bstr = evt.target?.result;\r\n                const wb = XLSX.read(bstr, { type: 'binary' });\r\n                const wsname = wb.SheetNames[0];\r\n                const ws = wb.Sheets[wsname];\r\n                const data: any[] = XLSX.utils.sheet_to_json(ws);\r\n\r\n                if (data.length === 0) {\r\n                    alert('El archivo Excel está vacío');\r\n                    return;\r\n                }\r\n\r\n                // Map Excel columns to our database schema\r\n                const clientsToInsert = data.map(row => ({\r\n                    national_id: String(row.Cedula || row.Identificacion || row.ID || row['Cedula/DNI'] || ''),\r\n                    full_name: String(row.Nombre || row['Nombre Completo'] || row.Name || ''),\r\n                    phone: String(row.Telefono || row.Celular || row.Phone || ''),\r\n                    address: String(row.Direccion || row.Address || 'Cali, Colombia'),\r\n                    email: String(row.Email || row.Correo || ''),\r\n                    category: 'REGULAR'\r\n                })).filter(c => c.national_id && c.full_name);\r\n\r\n                if (clientsToInsert.length === 0) {\r\n                    alert('No se encontraron clientes válidos. El Excel debe tener columnas como \"Cedula\", \"Nombre\", \"Telefono\".');\r\n                    return;\r\n                }\r\n\r\n                // Insert into Supabase (using upsert on national_id if possible, or manual check)\r\n                const { error } = await supabase\r\n                    .from('clients')\r\n                    .upsert(clientsToInsert, { onConflict: 'national_id' });\r\n\r\n                if (error) throw error;\r\n\r\n                alert(`¡Éxito! Se han importado/actualizado ${clientsToInsert.length} clientes.`);\r\n                await loadClients();\r\n            } catch (error: any) {\r\n                console.error('Error importando Excel:', error);\r\n                alert('Error al procesar el archivo: ' + error.message);\r\n            } finally {\r\n                setIsImporting(false);\r\n                if (fileInputRef.current) fileInputRef.current.value = '';\r\n            }\r\n        };\r\n        reader.readAsBinaryString(file);\r\n    };\r\n\r\n    const handleAddClient = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n        try {\r\n            const { error } = await supabase\r\n                .from('clients')\r\n                .insert({\r\n                    national_id: newClientForm.national_id,\r\n                    full_name: newClientForm.name,\r\n                    phone: newClientForm.phone,\r\n                    address: newClientForm.address,\r\n                    category: 'REGULAR'\r\n                });\r\n\r\n            if (error) throw error;\r\n\r\n            await loadClients();\r\n            setShowAddModal(false);\r\n            setNewClientForm({ national_id: '', name: '', phone: '', address: '' });\r\n        } catch (error: any) {\r\n            alert(error.message);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleGenerateBulkMessages = async (topic: 'maintenance' | 'promo' | 'payment' | 'general' = 'maintenance') => {\r\n        setIsGenerating(true);\r\n        setBulkTopic(topic);\r\n        setShowBulkMessageModal(true);\r\n\r\n        const selectedList = clients.filter(c => selectedClients.has(c.id));\r\n\r\n        const initialStates: PersonalizedMessage[] = selectedList.map(c => ({\r\n            clientId: c.id,\r\n            clientName: c.name,\r\n            phone: c.phone,\r\n            message: 'Generando mensaje...',\r\n            status: 'generating'\r\n        }));\r\n        setPersonalizedMessages(initialStates);\r\n\r\n        // Get context from topic\r\n        let topicContext = \"\";\r\n        switch (topic) {\r\n            case 'maintenance': topicContext = \"Recordarle que su equipo requiere mantenimiento preventivo.\"; break;\r\n            case 'promo': topicContext = \"Ofrecerle un 20% de descuento en su próxima reparación.\"; break;\r\n            case 'payment': topicContext = \"Aviso cordial sobre un pago pendiente de su último servicio.\"; break;\r\n            case 'general': topicContext = \"Informarle que tenemos disponibilidad inmediata para revisón técnica.\"; break;\r\n        }\r\n\r\n        for (let i = 0; i < selectedList.length; i++) {\r\n            const client = selectedList[i];\r\n            // Update prompt for topic\r\n            const prompt = `Genera un mensaje de WhatsApp amigable y profesional para ${client.name}.\r\n            Contexto: ${topicContext}\r\n            Equipo mencionado: ${client.lastAppliance || 'línea blanca'}.\r\n            Tono: Servicial y directo. Máximo 25 palabras. Incluye emojis. No uses saludos genéricos como [Nombre] (usa su nombre real).`;\r\n\r\n            try {\r\n                // We'll use the existing server action but we should ideally pass the prompt\r\n                // For now, let's assume generatePersonalizedMessage can be improved or we call it directly\r\n                const msg = await generatePersonalizedMessage(client.name, client.lastAppliance || 'equipo', topic);\r\n\r\n                setPersonalizedMessages(prev => prev.map(p =>\r\n                    p.clientId === client.id\r\n                        ? { ...p, message: msg, status: 'ready' as const }\r\n                        : p\r\n                ));\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n\r\n        setIsGenerating(false);\r\n    };\r\n\r\n    const sendWhatsApp = (pMsg: PersonalizedMessage) => {\r\n        const url = `https://wa.me/${pMsg.phone.replace(/\\s+/g, '')}?text=${encodeURIComponent(pMsg.message)}`;\r\n        window.open(url, '_blank');\r\n        setPersonalizedMessages(prev => prev.map(p =>\r\n            p.clientId === pMsg.clientId ? { ...p, status: 'sent' } : p\r\n        ));\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-[#0a0c10] min-h-screen text-white pb-32 max-w-md mx-auto relative font-sans\">\r\n            <header className=\"sticky top-0 z-40 bg-[#0a0c10]/95 backdrop-blur-md pt-6 pb-4 px-6 border-b border-white/5 transition-all\">\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    {isSelectionMode ? (\r\n                        <div className=\"flex items-center gap-4 w-full\">\r\n                            <button onClick={toggleSelectionMode} className=\"p-2 hover:bg-gray-800 rounded-full transition-colors\">\r\n                                <X size={20} />\r\n                            </button>\r\n                            <h1 className=\"text-xl font-black flex-1\">{selectedClients.size} seleccionados</h1>\r\n                            <button\r\n                                onClick={selectAll}\r\n                                className=\"text-[10px] font-black uppercase tracking-widest text-[#135bec] bg-[#135bec]/10 px-4 py-2 rounded-xl\"\r\n                            >\r\n                                {selectedClients.size === filteredClients.length ? 'Ninguno' : 'Todos'}\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"flex items-center justify-between w-full\">\r\n                            <div className=\"flex flex-col\">\r\n                                <h1 className=\"text-2xl font-black tracking-tight\">Clientes</h1>\r\n                                <p className=\"text-[8px] font-bold text-gray-600 uppercase tracking-widest mt-0.5\">\r\n                                    Sincronizado: {lastSync.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit' })}\r\n                                </p>\r\n                            </div>\r\n                            <div className=\"flex gap-2\">\r\n                                <input\r\n                                    type=\"file\"\r\n                                    ref={fileInputRef}\r\n                                    onChange={handleImportExcel}\r\n                                    className=\"hidden\"\r\n                                    accept=\".xlsx, .xls, .csv\"\r\n                                />\r\n                                <button\r\n                                    onClick={() => fileInputRef.current?.click()}\r\n                                    className=\"p-3 bg-gray-900 border border-white/5 rounded-2xl text-emerald-500 hover:bg-gray-800 transition-all active:scale-95 relative\"\r\n                                    disabled={isImporting}\r\n                                >\r\n                                    {isImporting ? (\r\n                                        <div className=\"size-5 border-2 border-emerald-500/20 border-t-emerald-500 rounded-full animate-spin\" />\r\n                                    ) : (\r\n                                        <FileText size={20} />\r\n                                    )}\r\n                                </button>\r\n                                <button onClick={() => setShowAddModal(true)} className=\"p-3 bg-gray-900 border border-white/5 rounded-2xl text-[#135bec] hover:bg-gray-800 transition-all active:scale-95\">\r\n                                    <UserPlus size={20} />\r\n                                </button>\r\n                                <button\r\n                                    onClick={toggleSelectionMode}\r\n                                    className={`flex items-center gap-2 px-4 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest transition-all active:scale-95 ${isSelectionMode ? 'bg-[#135bec] text-white shadow-lg' : 'bg-gray-900 border border-white/5 text-gray-400'\r\n                                        }`}\r\n                                >\r\n                                    <Filter size={18} />\r\n                                    Gestionar\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {!isSelectionMode && (\r\n                    <div className=\"space-y-5\">\r\n                        <div className=\"relative\">\r\n                            <Search className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500\" size={18} />\r\n                            <input\r\n                                className=\"w-full bg-gray-900/50 border border-white/5 rounded-2xl py-4 pl-12 pr-4 text-white placeholder-gray-600 focus:outline-none focus:border-[#135bec] transition-all text-sm font-medium\"\r\n                                placeholder=\"Nombre o identificación...\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex gap-2 overflow-x-auto no-scrollbar\">\r\n                            {[\r\n                                { id: 'all', label: 'Todos', count: stats.all },\r\n                                { id: 'expired', label: 'Vencidos', count: stats.expired, color: 'text-rose-500' },\r\n                                { id: 'upcoming', label: 'Próximos', count: stats.upcoming, color: 'text-amber-500' },\r\n                                { id: 'ok', label: 'Al día', count: stats.ok, color: 'text-emerald-500' }\r\n                            ].map(tab => (\r\n                                <button\r\n                                    key={tab.id}\r\n                                    onClick={() => setActiveFilter(tab.id as any)}\r\n                                    className={`shrink-0 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-[0.15em] border transition-all ${activeFilter === tab.id\r\n                                        ? 'bg-white text-black border-white'\r\n                                        : `bg-gray-900 border-white/5 ${tab.color || 'text-gray-500'}`\r\n                                        }`}\r\n                                >\r\n                                    {tab.label} ({tab.count})\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </header>\r\n\r\n            <main className=\"p-6 space-y-4\">\r\n                {isLoading ? (\r\n                    <div className=\"flex flex-col items-center justify-center py-20 animate-pulse\">\r\n                        <div className=\"size-12 border-4 border-[#135bec]/20 border-t-[#135bec] rounded-full animate-spin mb-4\"></div>\r\n                        <p className=\"text-xs font-black uppercase tracking-widest text-gray-600\">Sincronizando Base de Datos</p>\r\n                    </div>\r\n                ) : filteredClients.length === 0 ? (\r\n                    <div className=\"flex flex-col items-center justify-center py-24 text-gray-600 border-2 border-dashed border-white/5 rounded-[2.5rem]\">\r\n                        <User size={48} className=\"mb-4 opacity-20\" />\r\n                        <p className=\"font-bold text-sm\">Sin coincidencias encontradas</p>\r\n                    </div>\r\n                ) : (\r\n                    filteredClients.map((client) => {\r\n                        const mStatus = getMaintenanceStatus(client.lastServiceDate);\r\n                        const isSelected = selectedClients.has(client.id);\r\n                        const StatusIcon = mStatus.icon;\r\n\r\n                        return (\r\n                            <div\r\n                                key={client.id}\r\n                                onClick={() => isSelectionMode ? toggleClientSelection(client.id, { stopPropagation: () => { } } as any) : router.push(`/client-profile/${client.id}`)}\r\n                                className={`relative flex items-center justify-between p-5 rounded-[2.5rem] border transition-all active:scale-[0.98] cursor-pointer group overflow-hidden ${isSelected ? 'bg-[#135bec]/10 border-[#135bec] shadow-[0_10px_40px_rgba(19,91,236,0.1)]' : 'bg-gray-900/40 border-white/5 hover:border-white/10 hover:bg-gray-800/40'\r\n                                    }`}\r\n                            >\r\n                                {/* Selection Indicator */}\r\n                                {isSelected && <div className=\"absolute left-0 top-0 bottom-0 w-1.5 bg-[#135bec] shadow-[0_0_15px_rgba(19,91,236,1)]\" />}\r\n\r\n                                <div className=\"flex items-center gap-4\">\r\n                                    {isSelectionMode && (\r\n                                        <div className={`shrink-0 size-7 rounded-xl border-2 flex items-center justify-center transition-all duration-300 ${isSelected ? 'bg-[#135bec] border-[#135bec] scale-110 shadow-lg shadow-[#135bec]/30' : 'border-gray-700'}`}>\r\n                                            {isSelected && <Check size={14} className=\"text-white\" strokeWidth={4} />}\r\n                                        </div>\r\n                                    )}\r\n                                    <div className={`size-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-indigo-700 flex items-center justify-center font-black text-lg text-white shadow-xl transition-all duration-500 ${isSelected ? 'scale-90 rotate-3' : 'shadow-indigo-500/10'}`}>\r\n                                        {client.initials}\r\n                                    </div>\r\n                                    <div className=\"flex flex-col\">\r\n                                        <div className=\"flex items-center gap-2 mb-1\">\r\n                                            <h3 className={`font-black tracking-tight transition-colors duration-300 ${isSelected ? 'text-white' : 'text-gray-200'} text-sm truncate max-w-[140px]`}>{client.name}</h3>\r\n                                            {client.category === 'PREMIUM' && <span className=\"text-[7px] font-black bg-amber-500/10 text-amber-500 border border-amber-500/20 px-1.5 py-0.5 rounded-md uppercase tracking-tighter\">Gold</span>}\r\n                                            {client.category === 'ENTERPRISE' && <span className=\"text-[7px] font-black bg-[#135bec]/10 text-[#135bec] border border-[#135bec]/20 px-1.5 py-0.5 rounded-md uppercase tracking-tighter\">Corp</span>}\r\n                                        </div>\r\n                                        <div className=\"flex flex-col gap-1.5\">\r\n                                            <p className=\"text-[10px] text-gray-500 font-bold uppercase tracking-widest\">{client.phone}</p>\r\n                                            <div className={`flex items-center gap-1.5 px-3 py-1.5 rounded-xl text-[8px] font-black uppercase tracking-widest border border-white/5 transition-all duration-300 ${mStatus.bg} ${mStatus.color}`}>\r\n                                                <StatusIcon size={12} />\r\n                                                {mStatus.label}\r\n                                                {client.lastServiceDate && (\r\n                                                    <span className=\"opacity-40 ml-1\">\r\n                                                        ({new Date(client.lastServiceDate).toLocaleDateString()})\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                {!isSelectionMode && (\r\n                                    <button\r\n                                        onClick={(e) => {\r\n                                            e.stopPropagation();\r\n                                            const message = `Hola ${client.name}, le contactamos de ServiHogar para agendar un mantenimiento preventivo de su ${client.lastAppliance || 'equipo'}. ¿En qué horario le gustaría agendar?`;\r\n                                            window.open(`https://wa.me/${client.phone.replace(/\\D/g, '')}?text=${encodeURIComponent(message)}`, '_blank');\r\n                                        }}\r\n                                        className=\"p-3.5 bg-gray-900 border border-white/5 rounded-2xl text-gray-500 hover:text-[#25D366] hover:border-[#25D366]/20 transition-all hover:bg-[#25D366]/5\"\r\n                                    >\r\n                                        <MessageCircle size={20} />\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })\r\n                )}\r\n            </main>\r\n\r\n            {/* Enhanced Bulk Action Bar */}\r\n            <div className={`fixed bottom-28 left-6 right-6 max-w-md mx-auto z-[60] transition-all duration-500 transform ${isSelectionMode && selectedClients.size > 0 ? 'translate-y-0 opacity-100 scale-100' : 'translate-y-32 opacity-0 scale-95'}`}>\r\n                <div className=\"bg-[#135bec] rounded-[2rem] p-5 shadow-[0_20px_50px_rgba(19,91,236,0.5)] border border-white/20 flex flex-col gap-4\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-white font-black text-lg leading-none\">{selectedClients.size} Clientes</p>\r\n                            <p className=\"text-[9px] text-white/70 uppercase font-black tracking-widest mt-1\">Acción Masiva con ServiBot</p>\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            <button className=\"size-10 rounded-xl bg-white/10 flex items-center justify-center text-white hover:bg-white/20 transition-all\">\r\n                                <Send size={18} />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-2\">\r\n                        <button\r\n                            onClick={() => handleGenerateBulkMessages('maintenance')}\r\n                            className=\"bg-white/10 hover:bg-white/20 border border-white/5 p-3 rounded-xl flex flex-col items-center gap-1 transition-all group\"\r\n                        >\r\n                            <History size={16} className=\"text-white group-hover:scale-110 transition-transform\" />\r\n                            <span className=\"text-[8px] font-black uppercase tracking-tighter text-white/90\">Mantenimiento</span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => handleGenerateBulkMessages('promo')}\r\n                            className=\"bg-white/10 hover:bg-white/20 border border-white/5 p-3 rounded-xl flex flex-col items-center gap-1 transition-all group\"\r\n                        >\r\n                            <Sparkles size={16} className=\"text-white group-hover:scale-110 transition-transform\" />\r\n                            <span className=\"text-[8px] font-black uppercase tracking-tighter text-white/90\">Promoción</span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => handleGenerateBulkMessages('payment')}\r\n                            className=\"bg-white/10 hover:bg-white/20 border border-white/5 p-3 rounded-xl flex flex-col items-center gap-1 transition-all group\"\r\n                        >\r\n                            <FileText size={16} className=\"text-white group-hover:scale-110 transition-transform\" />\r\n                            <span className=\"text-[8px] font-black uppercase tracking-tighter text-white/90\">Cobranza</span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => handleGenerateBulkMessages('general')}\r\n                            className=\"bg-white text-[#135bec] p-3 rounded-xl flex flex-col items-center gap-1 shadow-lg font-black transition-all hover:scale-[1.02]\"\r\n                        >\r\n                            <MessageCircle size={16} />\r\n                            <span className=\"text-[8px] font-black uppercase tracking-tighter\">General</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Bulk Message Modal */}\r\n            {showBulkMessageModal && (\r\n                <div className=\"fixed inset-0 z-[110] flex items-end justify-center bg-black/90 backdrop-blur-md p-4\">\r\n                    <div className=\"bg-[#0a0c10] w-full max-w-md h-[85vh] rounded-t-[3rem] border-t border-white/10 flex flex-col animate-in slide-in-from-bottom duration-500\">\r\n                        <div className=\"p-8 border-b border-white/5 flex justify-between items-center\">\r\n                            <div>\r\n                                <h3 className=\"font-black text-xl\">ServiBot IA</h3>\r\n                                <p className=\"text-[10px] text-[#135bec] font-black uppercase tracking-widest mt-1\">Generando Mensajes Únicos</p>\r\n                            </div>\r\n                            <button onClick={() => setShowBulkMessageModal(false)} className=\"p-3 bg-gray-900 rounded-full text-gray-500\">\r\n                                <X size={20} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"flex-1 overflow-y-auto p-6 space-y-6 no-scrollbar\">\r\n                            {personalizedMessages.map((pm, idx) => (\r\n                                <div key={pm.clientId} className={`p-6 rounded-[2rem] border transition-all ${pm.status === 'sent' ? 'bg-black/40 border-white/5 opacity-50' : 'bg-gray-900 border-white/5 shadow-xl'}`}>\r\n                                    <div className=\"flex justify-between items-start mb-4\">\r\n                                        <div>\r\n                                            <h4 className=\"font-black text-sm\">{pm.clientName}</h4>\r\n                                            <p className=\"text-[9px] text-gray-500 font-bold tracking-widest uppercase mt-1\">{pm.phone}</p>\r\n                                        </div>\r\n                                        {pm.status === 'generating' && <div className=\"size-4 border-2 border-[#135bec]/30 border-t-[#135bec] rounded-full animate-spin\"></div>}\r\n                                        {pm.status === 'sent' && <CheckCircle2 className=\"text-[#00ff9d]\" size={16} />}\r\n                                    </div>\r\n                                    <textarea\r\n                                        className=\"w-full bg-black/40 border border-white/5 rounded-2xl p-4 text-[13px] text-gray-300 h-28 resize-none focus:outline-none focus:border-[#135bec] transition-all font-medium leading-relaxed\"\r\n                                        value={pm.message}\r\n                                        onChange={(e) => {\r\n                                            const newMsgs = [...personalizedMessages];\r\n                                            newMsgs[idx].message = e.target.value;\r\n                                            setPersonalizedMessages(newMsgs);\r\n                                        }}\r\n                                    />\r\n                                    <button\r\n                                        onClick={() => sendWhatsApp(pm)}\r\n                                        disabled={pm.status !== 'ready'}\r\n                                        className={`w-full mt-4 py-4 rounded-2xl font-black text-[10px] uppercase tracking-widest flex items-center justify-center gap-2 transition-all ${pm.status === 'ready' ? 'bg-[#25D366] text-white' : 'bg-gray-800 text-gray-600'\r\n                                            }`}\r\n                                    >\r\n                                        <Send size={14} />\r\n                                        {pm.status === 'sent' ? 'Enviado' : 'Enviar WhatsApp'}\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Add Modal Placeholder (Simplify for now) */}\r\n            {showAddModal && (\r\n                <div className=\"fixed inset-0 z-[120] flex items-center justify-center bg-black/90 backdrop-blur-md p-6\">\r\n                    <div className=\"bg-[#0a0c10] w-full max-w-sm rounded-[3rem] border border-white/10 p-8\">\r\n                        <div className=\"flex justify-between items-center mb-8\">\r\n                            <h2 className=\"text-2xl font-black\">Nuevo Cliente</h2>\r\n                            <button onClick={() => setShowAddModal(false)} className=\"p-2 text-gray-500\"><X size={24} /></button>\r\n                        </div>\r\n                        <form onSubmit={handleAddClient} className=\"space-y-6\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-1\">Cédula / DNI</label>\r\n                                <input required className=\"w-full bg-gray-900 border border-white/5 rounded-2xl p-4 text-sm\" value={newClientForm.national_id} onChange={e => setNewClientForm({ ...newClientForm, national_id: e.target.value })} />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-1\">Nombre</label>\r\n                                <input required className=\"w-full bg-gray-900 border border-white/5 rounded-2xl p-4 text-sm\" value={newClientForm.name} onChange={e => setNewClientForm({ ...newClientForm, name: e.target.value })} />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-[10px] font-black uppercase tracking-widest text-gray-500 ml-1\">Teléfono</label>\r\n                                <input required className=\"w-full bg-gray-900 border border-white/5 rounded-2xl p-4 text-sm\" value={newClientForm.phone} onChange={e => setNewClientForm({ ...newClientForm, phone: e.target.value })} />\r\n                            </div>\r\n                            <button className=\"w-full py-4 bg-[#135bec] text-white rounded-2xl font-black uppercase text-xs tracking-[0.2em] shadow-lg shadow-[#135bec]/20\">Crear Registro</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Filter\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjIyIDMgMiAzIDEwIDEyLjQ2IDEwIDE5IDE0IDIxIDE0IDEyLjQ2IDIyIDMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/filter\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Filter = createLucideIcon('Filter', [\n  ['polygon', { points: '22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3', key: '1yg77f' }],\n]);\n\nexport default Filter;\n"],"names":[],"mappings":"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","ignoreList":[1]}