module.exports=[77518,(a,b,c)=>{function d(){return b.exports=d=Object.assign.bind(),b.exports.__esModule=!0,b.exports.default=b.exports,d.apply(null,arguments)}b.exports=d,b.exports.__esModule=!0,b.exports.default=b.exports},9244,(a,b,c)=>{b.exports=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c},b.exports.__esModule=!0,b.exports.default=b.exports},92743,(a,b,c)=>{var d=a.r(9244);b.exports=function(a,b){if(null==a)return{};var c,e,f=d(a,b);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(a);for(e=0;e<g.length;e++)c=g[e],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(f[c]=a[c])}return f},b.exports.__esModule=!0,b.exports.default=b.exports},15898,(a,b,c)=>{function d(a){return b.exports=d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b.exports.__esModule=!0,b.exports.default=b.exports,d(a)}b.exports=d,b.exports.__esModule=!0,b.exports.default=b.exports},59942,(a,b,c)=>{var d=a.r(15898).default;b.exports=function(a,b){if("object"!=d(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var e=c.call(a,b||"default");if("object"!=d(e))return e;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)},b.exports.__esModule=!0,b.exports.default=b.exports},71003,(a,b,c)=>{var d=a.r(15898).default,e=a.r(59942);b.exports=function(a){var b=e(a,"string");return"symbol"==d(b)?b:b+""},b.exports.__esModule=!0,b.exports.default=b.exports},74626,(a,b,c)=>{var d=a.r(71003);function e(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,d(e.key),e)}}b.exports=function(a,b,c){return b&&e(a.prototype,b),c&&e(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a},b.exports.__esModule=!0,b.exports.default=b.exports},7295,(a,b,c)=>{b.exports=function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")},b.exports.__esModule=!0,b.exports.default=b.exports},16631,(a,b,c)=>{function d(a,c){return b.exports=d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a},b.exports.__esModule=!0,b.exports.default=b.exports,d(a,c)}b.exports=d,b.exports.__esModule=!0,b.exports.default=b.exports},44248,(a,b,c)=>{var d=a.r(16631);b.exports=function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),b&&d(a,b)},b.exports.__esModule=!0,b.exports.default=b.exports},35586,(a,b,c)=>{function d(a){return b.exports=d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},b.exports.__esModule=!0,b.exports.default=b.exports,d(a)}b.exports=d,b.exports.__esModule=!0,b.exports.default=b.exports},37660,(a,b,c)=>{function d(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(b.exports=d=function(){return!!a},b.exports.__esModule=!0,b.exports.default=b.exports)()}b.exports=d,b.exports.__esModule=!0,b.exports.default=b.exports},46244,(a,b,c)=>{b.exports=function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a},b.exports.__esModule=!0,b.exports.default=b.exports},50503,(a,b,c)=>{var d=a.r(15898).default,e=a.r(46244);b.exports=function(a,b){if(b&&("object"==d(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");return e(a)},b.exports.__esModule=!0,b.exports.default=b.exports},19067,(a,b,c)=>{var d=a.r(35586),e=a.r(37660),f=a.r(50503);b.exports=function(a){var b=e();return function(){var c,e=d(a);return c=b?Reflect.construct(e,arguments,d(this).constructor):e.apply(this,arguments),f(this,c)}},b.exports.__esModule=!0,b.exports.default=b.exports},82520,(a,b,c)=>{"use strict";b.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},24560,(a,b,c)=>{"use strict";var d=a.r(82520);function e(){}function f(){}f.resetWarningCache=e,b.exports=function(){function a(a,b,c,e,f,g){if(g!==d){var h=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}function b(){return a}a.isRequired=a;var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:b,element:a,elementType:a,instanceOf:b,node:a,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:f,resetWarningCache:e};return c.PropTypes=c,c}},41212,(a,b,c)=>{b.exports=a.r(24560)()},63301,(a,b,c)=>{a.e,b.exports=function(){var a=[function(a,b){"use strict";function c(a,b,c,d){return({red:d[4*(c*b+a)],green:d[4*(c*b+a)+1],blue:d[4*(c*b+a)+2],alpha:d[4*(c*b+a)+3]}).alpha}function d(a,b,d,e){for(var f=a?1:-1,g=a?0:d-1,h=g;a?h<d:h>-1;h+=f)for(var i=0;i<b;i++)if(c(i,h,b,e))return h;return null}function e(a,b,d,e){for(var f=a?1:-1,g=a?0:b-1,h=g;a?h<b:h>-1;h+=f)for(var i=0;i<d;i++)if(c(h,i,b,e))return h;return null}Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){var b=a.getContext("2d"),c=a.width,f=a.height,g=b.getImageData(0,0,c,f).data,h=d(!0,c,f,g),i=d(!1,c,f,g),j=e(!0,c,f,g),k=e(!1,c,f,g)-j+1,l=i-h+1,m=b.getImageData(j,h,k,l);return a.width=k,a.height=l,b.clearRect(0,0,k,l),b.putImageData(m,0,0),a}}];function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}()},96166,a=>{"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=a.i(87924),A=a.i(72131),B=a.i(50944),C=a.i(78560),D=a.i(13749),E=a.i(79808),F=a.i(70106);let G=(0,F.default)("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);var H=a.i(4975),I=a.i(80032),J=a.i(59564),K=a.i(82434),L=a.i(33441),M=a.i(87532),N=a.i(92e3),O=a.i(62722),P=a.i(56738),Q=a.i(45222),R=a.i(63519);let S=(0,F.default)("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var T=a.i(74566),U=a.i(46842);let V=(0,F.default)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var W=a.i(16201);let X=(0,F.default)("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Y=(0,F.default)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var Z=a.i(23237),$=a.i(8406),_=a.i(46271),aa=a.i(62036);(b=n||(n={})).STRING="string",b.NUMBER="number",b.INTEGER="integer",b.BOOLEAN="boolean",b.ARRAY="array",b.OBJECT="object",(c=o||(o={})).LANGUAGE_UNSPECIFIED="language_unspecified",c.PYTHON="python",(d=p||(p={})).OUTCOME_UNSPECIFIED="outcome_unspecified",d.OUTCOME_OK="outcome_ok",d.OUTCOME_FAILED="outcome_failed",d.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded";let ab=["user","model","function","system"];(e=q||(q={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",(f=r||(r={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",f.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",f.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",f.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",f.BLOCK_NONE="BLOCK_NONE",(g=s||(s={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",g.NEGLIGIBLE="NEGLIGIBLE",g.LOW="LOW",g.MEDIUM="MEDIUM",g.HIGH="HIGH",(h=t||(t={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",h.SAFETY="SAFETY",h.OTHER="OTHER",(i=u||(u={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.OTHER="OTHER",(j=v||(v={})).TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",j.RETRIEVAL_QUERY="RETRIEVAL_QUERY",j.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",j.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",j.CLASSIFICATION="CLASSIFICATION",j.CLUSTERING="CLUSTERING",(k=w||(w={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",k.AUTO="AUTO",k.ANY="ANY",k.NONE="NONE",(l=x||(x={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",l.MODE_DYNAMIC="MODE_DYNAMIC";class ac extends Error{constructor(a){super(`[GoogleGenerativeAI Error]: ${a}`)}}class ad extends ac{constructor(a,b){super(a),this.response=b}}class ae extends ac{constructor(a,b,c,d){super(a),this.status=b,this.statusText=c,this.errorDetails=d}}class af extends ac{}class ag extends ac{}(m=y||(y={})).GENERATE_CONTENT="generateContent",m.STREAM_GENERATE_CONTENT="streamGenerateContent",m.COUNT_TOKENS="countTokens",m.EMBED_CONTENT="embedContent",m.BATCH_EMBED_CONTENTS="batchEmbedContents";class ah{constructor(a,b,c,d,e){this.model=a,this.task=b,this.apiKey=c,this.stream=d,this.requestOptions=e}toString(){var a,b;let c=(null==(a=this.requestOptions)?void 0:a.apiVersion)||"v1beta",d=(null==(b=this.requestOptions)?void 0:b.baseUrl)||"https://generativelanguage.googleapis.com",e=`${d}/${c}/${this.model}:${this.task}`;return this.stream&&(e+="?alt=sse"),e}}async function ai(a){var b,c;let d,e=new Headers;e.append("Content-Type","application/json"),e.append("x-goog-api-client",(c=a.requestOptions,d=[],(null==c?void 0:c.apiClient)&&d.push(c.apiClient),d.push("genai-js/0.24.1"),d.join(" "))),e.append("x-goog-api-key",a.apiKey);let f=null==(b=a.requestOptions)?void 0:b.customHeaders;if(f){if(!(f instanceof Headers))try{f=new Headers(f)}catch(a){throw new af(`unable to convert customHeaders value ${JSON.stringify(f)} to Headers: ${a.message}`)}for(let[a,b]of f.entries()){if("x-goog-api-key"===a)throw new af(`Cannot set reserved header name ${a}`);if("x-goog-api-client"===a)throw new af(`Header name ${a} can only be set using the apiClient field`);e.append(a,b)}}return e}async function aj(a,b,c,d,e,f){let g=new ah(a,b,c,d,f);return{url:g.toString(),fetchOptions:Object.assign(Object.assign({},function(a){let b={};if((null==a?void 0:a.signal)!==void 0||(null==a?void 0:a.timeout)>=0){let c=new AbortController;(null==a?void 0:a.timeout)>=0&&setTimeout(()=>c.abort(),a.timeout),(null==a?void 0:a.signal)&&a.signal.addEventListener("abort",()=>{c.abort()}),b.signal=c.signal}return b}(f)),{method:"POST",headers:await ai(g),body:e})}}async function ak(a,b,c,d,e,f={},g=fetch){let{url:h,fetchOptions:i}=await aj(a,b,c,d,e,f);return al(h,i,g)}async function al(a,b,c=fetch){let d;try{d=await c(a,b)}catch(c){var e=c,f=a;let b=e;throw"AbortError"===b.name?(b=new ag(`Request aborted when fetching ${f.toString()}: ${e.message}`)).stack=e.stack:e instanceof ae||e instanceof af||((b=new ac(`Error fetching from ${f.toString()}: ${e.message}`)).stack=e.stack),b}return d.ok||await am(d,a),d}async function am(a,b){let c,d="";try{let b=await a.json();d=b.error.message,b.error.details&&(d+=` ${JSON.stringify(b.error.details)}`,c=b.error.details)}catch(a){}throw new ae(`Error fetching from ${b.toString()}: [${a.status} ${a.statusText}] ${d}`,a.status,a.statusText,c)}function an(a){return a.text=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),aq(a.candidates[0]))throw new ad(`${ar(a)}`,a);return function(a){var b,c,d,e;let f=[];if(null==(c=null==(b=a.candidates)?void 0:b[0].content)?void 0:c.parts)for(let b of null==(e=null==(d=a.candidates)?void 0:d[0].content)?void 0:e.parts)b.text&&f.push(b.text),b.executableCode&&f.push("\n```"+b.executableCode.language+"\n"+b.executableCode.code+"\n```\n"),b.codeExecutionResult&&f.push("\n```\n"+b.codeExecutionResult.output+"\n```\n");return f.length>0?f.join(""):""}(a)}if(a.promptFeedback)throw new ad(`Text not available. ${ar(a)}`,a);return""},a.functionCall=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),aq(a.candidates[0]))throw new ad(`${ar(a)}`,a);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),ao(a)[0]}if(a.promptFeedback)throw new ad(`Function call not available. ${ar(a)}`,a)},a.functionCalls=()=>{if(a.candidates&&a.candidates.length>0){if(a.candidates.length>1&&console.warn(`This response had ${a.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),aq(a.candidates[0]))throw new ad(`${ar(a)}`,a);return ao(a)}if(a.promptFeedback)throw new ad(`Function call not available. ${ar(a)}`,a)},a}function ao(a){var b,c,d,e;let f=[];if(null==(c=null==(b=a.candidates)?void 0:b[0].content)?void 0:c.parts)for(let b of null==(e=null==(d=a.candidates)?void 0:d[0].content)?void 0:e.parts)b.functionCall&&f.push(b.functionCall);return f.length>0?f:void 0}let ap=[u.RECITATION,u.SAFETY,u.LANGUAGE];function aq(a){return!!a.finishReason&&ap.includes(a.finishReason)}function ar(a){var b,c,d;let e="";if((!a.candidates||0===a.candidates.length)&&a.promptFeedback)e+="Response was blocked",(null==(b=a.promptFeedback)?void 0:b.blockReason)&&(e+=` due to ${a.promptFeedback.blockReason}`),(null==(c=a.promptFeedback)?void 0:c.blockReasonMessage)&&(e+=`: ${a.promptFeedback.blockReasonMessage}`);else if(null==(d=a.candidates)?void 0:d[0]){let b=a.candidates[0];aq(b)&&(e+=`Candidate was blocked due to ${b.finishReason}`,b.finishMessage&&(e+=`: ${b.finishMessage}`))}return e}function as(a){return this instanceof as?(this.v=a,this):new as(a)}"function"==typeof SuppressedError&&SuppressedError;let at=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function au(a){let b=[],c=a.getReader();for(;;){let{done:a,value:d}=await c.read();if(a)return an(function(a){let b=a[a.length-1],c={promptFeedback:null==b?void 0:b.promptFeedback};for(let b of a){if(b.candidates){let a=0;for(let d of b.candidates)if(c.candidates||(c.candidates=[]),c.candidates[a]||(c.candidates[a]={index:a}),c.candidates[a].citationMetadata=d.citationMetadata,c.candidates[a].groundingMetadata=d.groundingMetadata,c.candidates[a].finishReason=d.finishReason,c.candidates[a].finishMessage=d.finishMessage,c.candidates[a].safetyRatings=d.safetyRatings,d.content&&d.content.parts){c.candidates[a].content||(c.candidates[a].content={role:d.content.role||"user",parts:[]});let b={};for(let e of d.content.parts)e.text&&(b.text=e.text),e.functionCall&&(b.functionCall=e.functionCall),e.executableCode&&(b.executableCode=e.executableCode),e.codeExecutionResult&&(b.codeExecutionResult=e.codeExecutionResult),0===Object.keys(b).length&&(b.text=""),c.candidates[a].content.parts.push(b)}a++}b.usageMetadata&&(c.usageMetadata=b.usageMetadata)}return c}(b));b.push(d)}}async function av(a,b,c,d){return function(a){let b,[c,d]=(b=a.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})).getReader(),new ReadableStream({start(a){let c="";return function d(){return b.read().then(({value:b,done:e})=>{let f;if(e)return c.trim()?void a.error(new ac("Failed to parse stream")):void a.close();let g=(c+=b).match(at);for(;g;){try{f=JSON.parse(g[1])}catch(b){a.error(new ac(`Error parsing JSON response: "${g[1]}"`));return}a.enqueue(f),g=(c=c.substring(g[0].length)).match(at)}return d()}).catch(a=>{let b=a;throw b.stack=a.stack,b="AbortError"===b.name?new ag("Request aborted when reading from the stream"):new ac("Error reading from the stream")})}()}})).tee();return{stream:function(a){return function(a,b,c){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var d,e=c.apply(a,b||[]),f=[];return d={},g("next"),g("throw"),g("return"),d[Symbol.asyncIterator]=function(){return this},d;function g(a){e[a]&&(d[a]=function(b){return new Promise(function(c,d){f.push([a,b,c,d])>1||h(a,b)})})}function h(a,b){try{var c;(c=e[a](b)).value instanceof as?Promise.resolve(c.value.v).then(i,j):k(f[0][2],c)}catch(a){k(f[0][3],a)}}function i(a){h("next",a)}function j(a){h("throw",a)}function k(a,b){a(b),f.shift(),f.length&&h(f[0][0],f[0][1])}}(this,arguments,function*(){let b=a.getReader();for(;;){let{value:a,done:c}=yield as(b.read());if(c)break;yield yield as(an(a))}})}(c),response:au(d)}}(await ak(b,y.STREAM_GENERATE_CONTENT,a,!0,JSON.stringify(c),d))}async function aw(a,b,c,d){let e=await ak(b,y.GENERATE_CONTENT,a,!1,JSON.stringify(c),d);return{response:an(await e.json())}}function ax(a){if(null!=a){if("string"==typeof a)return{role:"system",parts:[{text:a}]};if(a.text)return{role:"system",parts:[a]};if(a.parts)if(!a.role)return{role:"system",parts:a.parts};else return a}}function ay(a){let b=[];if("string"==typeof a)b=[{text:a}];else for(let c of a)"string"==typeof c?b.push({text:c}):b.push(c);var c=b;let d={role:"user",parts:[]},e={role:"function",parts:[]},f=!1,g=!1;for(let a of c)"functionResponse"in a?(e.parts.push(a),g=!0):(d.parts.push(a),f=!0);if(f&&g)throw new ac("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!f&&!g)throw new ac("No content is provided for sending chat message.");return f?d:e}function az(a){let b;return b=a.contents?a:{contents:[ay(a)]},a.systemInstruction&&(b.systemInstruction=ax(a.systemInstruction)),b}let aA=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],aB={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function aC(a){var b;if(void 0===a.candidates||0===a.candidates.length)return!1;let c=null==(b=a.candidates[0])?void 0:b.content;if(void 0===c||void 0===c.parts||0===c.parts.length)return!1;for(let a of c.parts)if(void 0===a||0===Object.keys(a).length||void 0!==a.text&&""===a.text)return!1;return!0}let aD="SILENT_ERROR";class aE{constructor(a,b,c,d={}){this.model=b,this.params=c,this._requestOptions=d,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=a,(null==c?void 0:c.history)&&(!function(a){let b=!1;for(let c of a){let{role:a,parts:d}=c;if(!b&&"user"!==a)throw new ac(`First content should be with role 'user', got ${a}`);if(!ab.includes(a))throw new ac(`Each item should include role field. Got ${a} but valid roles are: ${JSON.stringify(ab)}`);if(!Array.isArray(d))throw new ac("Content should have 'parts' property with an array of Parts");if(0===d.length)throw new ac("Each Content should have at least one part");let e={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let a of d)for(let b of aA)b in a&&(e[b]+=1);let f=aB[a];for(let b of aA)if(!f.includes(b)&&e[b]>0)throw new ac(`Content with role '${a}' can't contain '${b}' part`);b=!0}}(c.history),this._history=c.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(a,b={}){var c,d,e,f,g,h;let i;await this._sendPromise;let j=ay(a),k={safetySettings:null==(c=this.params)?void 0:c.safetySettings,generationConfig:null==(d=this.params)?void 0:d.generationConfig,tools:null==(e=this.params)?void 0:e.tools,toolConfig:null==(f=this.params)?void 0:f.toolConfig,systemInstruction:null==(g=this.params)?void 0:g.systemInstruction,cachedContent:null==(h=this.params)?void 0:h.cachedContent,contents:[...this._history,j]},l=Object.assign(Object.assign({},this._requestOptions),b);return this._sendPromise=this._sendPromise.then(()=>aw(this._apiKey,this.model,k,l)).then(a=>{var b;if(aC(a.response)){this._history.push(j);let c=Object.assign({parts:[],role:"model"},null==(b=a.response.candidates)?void 0:b[0].content);this._history.push(c)}else{let b=ar(a.response);b&&console.warn(`sendMessage() was unsuccessful. ${b}. Inspect response object for details.`)}i=a}).catch(a=>{throw this._sendPromise=Promise.resolve(),a}),await this._sendPromise,i}async sendMessageStream(a,b={}){var c,d,e,f,g,h;await this._sendPromise;let i=ay(a),j={safetySettings:null==(c=this.params)?void 0:c.safetySettings,generationConfig:null==(d=this.params)?void 0:d.generationConfig,tools:null==(e=this.params)?void 0:e.tools,toolConfig:null==(f=this.params)?void 0:f.toolConfig,systemInstruction:null==(g=this.params)?void 0:g.systemInstruction,cachedContent:null==(h=this.params)?void 0:h.cachedContent,contents:[...this._history,i]},k=Object.assign(Object.assign({},this._requestOptions),b),l=av(this._apiKey,this.model,j,k);return this._sendPromise=this._sendPromise.then(()=>l).catch(a=>{throw Error(aD)}).then(a=>a.response).then(a=>{if(aC(a)){this._history.push(i);let b=Object.assign({},a.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{let b=ar(a);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(a=>{a.message!==aD&&console.error(a)}),l}}async function aF(a,b,c,d){return(await ak(b,y.COUNT_TOKENS,a,!1,JSON.stringify(c),d)).json()}async function aG(a,b,c,d){return(await ak(b,y.EMBED_CONTENT,a,!1,JSON.stringify(c),d)).json()}async function aH(a,b,c,d){let e=c.requests.map(a=>Object.assign(Object.assign({},a),{model:b}));return(await ak(b,y.BATCH_EMBED_CONTENTS,a,!1,JSON.stringify({requests:e}),d)).json()}class aI{constructor(a,b,c={}){this.apiKey=a,this._requestOptions=c,b.model.includes("/")?this.model=b.model:this.model=`models/${b.model}`,this.generationConfig=b.generationConfig||{},this.safetySettings=b.safetySettings||[],this.tools=b.tools,this.toolConfig=b.toolConfig,this.systemInstruction=ax(b.systemInstruction),this.cachedContent=b.cachedContent}async generateContent(a,b={}){var c;let d=az(a),e=Object.assign(Object.assign({},this._requestOptions),b);return aw(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(c=this.cachedContent)?void 0:c.name},d),e)}async generateContentStream(a,b={}){var c;let d=az(a),e=Object.assign(Object.assign({},this._requestOptions),b);return av(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(c=this.cachedContent)?void 0:c.name},d),e)}startChat(a){var b;return new aE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null==(b=this.cachedContent)?void 0:b.name},a),this._requestOptions)}async countTokens(a,b={}){let c=function(a,b){var c;let d={model:null==b?void 0:b.model,generationConfig:null==b?void 0:b.generationConfig,safetySettings:null==b?void 0:b.safetySettings,tools:null==b?void 0:b.tools,toolConfig:null==b?void 0:b.toolConfig,systemInstruction:null==b?void 0:b.systemInstruction,cachedContent:null==(c=null==b?void 0:b.cachedContent)?void 0:c.name,contents:[]},e=null!=a.generateContentRequest;if(a.contents){if(e)throw new af("CountTokensRequest must have one of contents or generateContentRequest, not both.");d.contents=a.contents}else if(e)d=Object.assign(Object.assign({},d),a.generateContentRequest);else{let b=ay(a);d.contents=[b]}return{generateContentRequest:d}}(a,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),d=Object.assign(Object.assign({},this._requestOptions),b);return aF(this.apiKey,this.model,c,d)}async embedContent(a,b={}){let c="string"==typeof a||Array.isArray(a)?{content:ay(a)}:a,d=Object.assign(Object.assign({},this._requestOptions),b);return aG(this.apiKey,this.model,c,d)}async batchEmbedContents(a,b={}){let c=Object.assign(Object.assign({},this._requestOptions),b);return aH(this.apiKey,this.model,a,c)}}var aJ=a.i(77518),aK=a.i(92743),aL=a.i(74626),aM=a.i(7295),aN=a.i(44248),aO=a.i(19067),aP=a.i(41212);function aQ(a,b,c){this.x=a,this.y=b,this.time=c||new Date().getTime()}function aR(a,b,c,d){this.startPoint=a,this.control1=b,this.control2=c,this.endPoint=d}function aS(a,b){var c,d,e,f,g,h,i,j,k,l=this,m=b||{};(this.velocityFilterWeight=m.velocityFilterWeight||.7,this.minWidth=m.minWidth||.5,this.maxWidth=m.maxWidth||2.5,this.throttle="throttle"in m?m.throttle:16,this.minDistance="minDistance"in m?m.minDistance:5,this.throttle)?this._strokeMoveUpdate=(c=aS.prototype._strokeUpdate,d=this.throttle,i=null,j=0,e||(e={}),k=function(){j=!1===e.leading?0:Date.now(),i=null,h=c.apply(f,g),i||(f=g=null)},function(){var a=Date.now();j||!1!==e.leading||(j=a);var b=d-(a-j);return f=this,g=arguments,b<=0||b>d?(i&&(clearTimeout(i),i=null),j=a,h=c.apply(f,g),i||(f=g=null)):i||!1===e.trailing||(i=setTimeout(k,b)),h}):this._strokeMoveUpdate=aS.prototype._strokeUpdate,this.dotSize=m.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=m.penColor||"black",this.backgroundColor=m.backgroundColor||"rgba(0,0,0,0)",this.onBegin=m.onBegin,this.onEnd=m.onEnd,this._canvas=a,this._ctx=a.getContext("2d"),this.clear(),this._handleMouseDown=function(a){1===a.which&&(l._mouseButtonDown=!0,l._strokeBegin(a))},this._handleMouseMove=function(a){l._mouseButtonDown&&l._strokeMoveUpdate(a)},this._handleMouseUp=function(a){1===a.which&&l._mouseButtonDown&&(l._mouseButtonDown=!1,l._strokeEnd(a))},this._handleTouchStart=function(a){if(1===a.targetTouches.length){var b=a.changedTouches[0];l._strokeBegin(b)}},this._handleTouchMove=function(a){a.preventDefault();var b=a.targetTouches[0];l._strokeMoveUpdate(b)},this._handleTouchEnd=function(a){a.target===l._canvas&&(a.preventDefault(),l._strokeEnd(a))},this.on()}aQ.prototype.velocityFrom=function(a){return this.time!==a.time?this.distanceTo(a)/(this.time-a.time):1},aQ.prototype.distanceTo=function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},aQ.prototype.equals=function(a){return this.x===a.x&&this.y===a.y&&this.time===a.time},aR.prototype.length=function(){for(var a=0,b=void 0,c=void 0,d=0;d<=10;d+=1){var e=d/10,f=this._point(e,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),g=this._point(e,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(d>0){var h=f-b,i=g-c;a+=Math.sqrt(h*h+i*i)}b=f,c=g}return a},aR.prototype._point=function(a,b,c,d,e){return b*(1-a)*(1-a)*(1-a)+3*c*(1-a)*(1-a)*a+3*d*(1-a)*a*a+e*a*a*a},aS.prototype.clear=function(){var a=this._ctx,b=this._canvas;a.fillStyle=this.backgroundColor,a.clearRect(0,0,b.width,b.height),a.fillRect(0,0,b.width,b.height),this._data=[],this._reset(),this._isEmpty=!0},aS.prototype.fromDataURL=function(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=new Image,e=c.ratio||window.devicePixelRatio||1,f=c.width||this._canvas.width/e,g=c.height||this._canvas.height/e;this._reset(),d.src=a,d.onload=function(){b._ctx.drawImage(d,0,0,f,g)},this._isEmpty=!1},aS.prototype.toDataURL=function(a){var b;if("image/svg+xml"===a)return this._toSVG();for(var c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return(b=this._canvas).toDataURL.apply(b,[a].concat(d))},aS.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},aS.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},aS.prototype.isEmpty=function(){return this._isEmpty},aS.prototype._strokeBegin=function(a){this._data.push([]),this._reset(),this._strokeUpdate(a),"function"==typeof this.onBegin&&this.onBegin(a)},aS.prototype._strokeUpdate=function(a){var b=a.clientX,c=a.clientY,d=this._createPoint(b,c),e=this._data[this._data.length-1],f=e&&e[e.length-1],g=f&&d.distanceTo(f)<this.minDistance;if(!(f&&g)){var h=this._addPoint(d),i=h.curve,j=h.widths;i&&j&&this._drawCurve(i,j.start,j.end),this._data[this._data.length-1].push({x:d.x,y:d.y,time:d.time,color:this.penColor})}},aS.prototype._strokeEnd=function(a){var b=this.points.length>2,c=this.points[0];if(!b&&c&&this._drawDot(c),c){var d=this._data[this._data.length-1],e=d[d.length-1];c.equals(e)||d.push({x:c.x,y:c.y,time:c.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(a)},aS.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},aS.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},aS.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},aS.prototype._createPoint=function(a,b,c){var d=this._canvas.getBoundingClientRect();return new aQ(a-d.left,b-d.top,c||new Date().getTime())},aS.prototype._addPoint=function(a){var b=this.points;if(b.push(a),b.length>2){3===b.length&&b.unshift(b[0]);var c=this._calculateCurveControlPoints(b[0],b[1],b[2]).c2,d=this._calculateCurveControlPoints(b[1],b[2],b[3]).c1,e=new aR(b[1],c,d,b[2]),f=this._calculateCurveWidths(e);return b.shift(),{curve:e,widths:f}}return{}},aS.prototype._calculateCurveControlPoints=function(a,b,c){var d=a.x-b.x,e=a.y-b.y,f=b.x-c.x,g=b.y-c.y,h={x:(a.x+b.x)/2,y:(a.y+b.y)/2},i={x:(b.x+c.x)/2,y:(b.y+c.y)/2},j=Math.sqrt(d*d+e*e),k=Math.sqrt(f*f+g*g),l=h.x-i.x,m=h.y-i.y,n=k/(j+k),o={x:i.x+l*n,y:i.y+m*n},p=b.x-o.x,q=b.y-o.y;return{c1:new aQ(h.x+p,h.y+q),c2:new aQ(i.x+p,i.y+q)}},aS.prototype._calculateCurveWidths=function(a){var b=a.startPoint,c=a.endPoint,d={start:null,end:null},e=this.velocityFilterWeight*c.velocityFrom(b)+(1-this.velocityFilterWeight)*this._lastVelocity,f=this._strokeWidth(e);return d.start=this._lastWidth,d.end=f,this._lastVelocity=e,this._lastWidth=f,d},aS.prototype._strokeWidth=function(a){return Math.max(this.maxWidth/(a+1),this.minWidth)},aS.prototype._drawPoint=function(a,b,c){var d=this._ctx;d.moveTo(a,b),d.arc(a,b,c,0,2*Math.PI,!1),this._isEmpty=!1},aS.prototype._drawCurve=function(a,b,c){var d=this._ctx,e=c-b,f=Math.floor(a.length());d.beginPath();for(var g=0;g<f;g+=1){var h=g/f,i=h*h,j=i*h,k=1-h,l=k*k,m=l*k,n=m*a.startPoint.x;n+=3*l*h*a.control1.x+3*k*i*a.control2.x+j*a.endPoint.x;var o=m*a.startPoint.y;o+=3*l*h*a.control1.y+3*k*i*a.control2.y+j*a.endPoint.y;var p=b+j*e;this._drawPoint(n,o,p)}d.closePath(),d.fill()},aS.prototype._drawDot=function(a){var b=this._ctx,c="function"==typeof this.dotSize?this.dotSize():this.dotSize;b.beginPath(),this._drawPoint(a.x,a.y,c),b.closePath(),b.fill()},aS.prototype._fromData=function(a,b,c){for(var d=0;d<a.length;d+=1){var e=a[d];if(e.length>1)for(var f=0;f<e.length;f+=1){var g=e[f],h=new aQ(g.x,g.y,g.time),i=g.color;if(0===f)this.penColor=i,this._reset(),this._addPoint(h);else if(f!==e.length-1){var j=this._addPoint(h),k=j.curve,l=j.widths;k&&l&&b(k,l,i)}}else this._reset(),c(e[0])}},aS.prototype._toSVG=function(){var a=this,b=this._data,c=this._canvas,d=Math.max(window.devicePixelRatio||1,1),e=c.width/d,f=c.height/d,g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.setAttributeNS(null,"width",c.width),g.setAttributeNS(null,"height",c.height),this._fromData(b,function(a,b,c){var d=document.createElement("path");if(!isNaN(a.control1.x)&&!isNaN(a.control1.y)&&!isNaN(a.control2.x)&&!isNaN(a.control2.y)){var e="M "+a.startPoint.x.toFixed(3)+","+a.startPoint.y.toFixed(3)+" "+("C "+a.control1.x.toFixed(3)+",")+a.control1.y.toFixed(3)+" "+(a.control2.x.toFixed(3)+",")+a.control2.y.toFixed(3)+" "+a.endPoint.x.toFixed(3)+","+a.endPoint.y.toFixed(3);d.setAttribute("d",e),d.setAttribute("stroke-width",(2.25*b.end).toFixed(3)),d.setAttribute("stroke",c),d.setAttribute("fill","none"),d.setAttribute("stroke-linecap","round"),g.appendChild(d)}},function(b){var c=document.createElement("circle"),d="function"==typeof a.dotSize?a.dotSize():a.dotSize;c.setAttribute("r",d),c.setAttribute("cx",b.x),c.setAttribute("cy",b.y),c.setAttribute("fill",b.color),g.appendChild(c)});var h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="0 0 '+e+" ")+f+'" width="'+e+'" height="'+f+'">',i=g.innerHTML;if(void 0===i){var j=document.createElement("dummy"),k=g.childNodes;j.innerHTML="";for(var l=0;l<k.length;l+=1)j.appendChild(k[l].cloneNode(!0));i=j.innerHTML}return"data:image/svg+xml;base64,"+btoa(h+i+"</svg>")},aS.prototype.fromData=function(a){var b=this;this.clear(),this._fromData(a,function(a,c){return b._drawCurve(a,c.start,c.end)},function(a){return b._drawDot(a)}),this._data=a},aS.prototype.toData=function(){return this._data};var aT=a.i(63301),aU=["canvasProps","clearOnResize"],aV=function(a){(0,aN.default)(c,a);var b=(0,aO.default)(c);function c(){var a;(0,aM.default)(this,c);for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=b.call.apply(b,[this].concat(e))).staticThis=a.constructor,a._sigPad=null,a._canvas=null,a.setRef=function(b){a._canvas=b,null===a._canvas&&(a._sigPad=null)},a._excludeOurProps=function(){var b=a.props;return b.canvasProps,b.clearOnResize,(0,aK.default)(b,aU)},a.componentDidMount=function(){var b=a.getCanvas();a._sigPad=new aS(b,a._excludeOurProps()),a._resizeCanvas(),a.on()},a.componentWillUnmount=function(){a.off()},a.componentDidUpdate=function(){Object.assign(a._sigPad,a._excludeOurProps())},a.getCanvas=function(){if(null===a._canvas)throw a.staticThis.refNullError;return a._canvas},a.getTrimmedCanvas=function(){var b=a.getCanvas(),c=document.createElement("canvas");return c.width=b.width,c.height=b.height,c.getContext("2d").drawImage(b,0,0),(0,aT.default)(c)},a.getSignaturePad=function(){if(null===a._sigPad)throw a.staticThis.refNullError;return a._sigPad},a._checkClearOnResize=function(){a.props.clearOnResize&&a._resizeCanvas()},a._resizeCanvas=function(){var b,c,d=null!=(b=a.props.canvasProps)?b:{},e=d.width,f=d.height;if(void 0===e||void 0===f){var g=a.getCanvas(),h=Math.max(null!=(c=window.devicePixelRatio)?c:1,1);void 0===e&&(g.width=g.offsetWidth*h),void 0===f&&(g.height=g.offsetHeight*h),g.getContext("2d").scale(h,h),a.clear()}},a.render=function(){var b=a.props.canvasProps;return A.default.createElement("canvas",(0,aJ.default)({ref:a.setRef},b))},a.on=function(){return window.addEventListener("resize",a._checkClearOnResize),a.getSignaturePad().on()},a.off=function(){return window.removeEventListener("resize",a._checkClearOnResize),a.getSignaturePad().off()},a.clear=function(){return a.getSignaturePad().clear()},a.isEmpty=function(){return a.getSignaturePad().isEmpty()},a.fromDataURL=function(b,c){return a.getSignaturePad().fromDataURL(b,c)},a.toDataURL=function(b,c){return a.getSignaturePad().toDataURL(b,c)},a.fromData=function(b){return a.getSignaturePad().fromData(b)},a.toData=function(){return a.getSignaturePad().toData()},a}return(0,aL.default)(c)}(A.Component);aV.propTypes={velocityFilterWeight:aP.default.number,minWidth:aP.default.number,maxWidth:aP.default.number,minDistance:aP.default.number,dotSize:aP.default.oneOfType([aP.default.number,aP.default.func]),penColor:aP.default.string,throttle:aP.default.number,onEnd:aP.default.func,onBegin:aP.default.func,canvasProps:aP.default.object,clearOnResize:aP.default.bool},aV.defaultProps={clearOnResize:!0},aV.refNullError=Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");var aW=a.i(81560),aX=a.i(67453);function aY({onSave:a,onClear:b}){let c=(0,A.useRef)(null);return(0,z.jsxs)("div",{className:"w-full space-y-4",children:[(0,z.jsxs)("div",{className:"relative w-full h-48 bg-white rounded-3xl overflow-hidden border-4 border-gray-900 shadow-2xl flex items-center justify-center cursor-crosshair",children:[(0,z.jsx)(aV,{ref:c,penColor:"black",canvasProps:{className:"w-full h-full signature-canvas"}}),(0,z.jsx)("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 pointer-events-none",children:(0,z.jsx)("span",{className:"text-gray-300 font-bold text-[10px] uppercase select-none opacity-50 tracking-widest",children:"Firme dentro del recuadro"})})]}),(0,z.jsxs)("div",{className:"flex gap-3",children:[(0,z.jsxs)("button",{onClick:()=>{c.current?.clear(),b&&b()},className:"flex-1 bg-gray-900/50 border border-white/5 text-gray-400 font-bold py-3 px-4 rounded-2xl flex items-center justify-center gap-2 hover:bg-rose-500/10 hover:text-rose-500 transition-all",children:[(0,z.jsx)(aW.Trash2,{size:16}),(0,z.jsx)("span",{className:"text-[10px] uppercase tracking-widest",children:"Borrar"})]}),(0,z.jsxs)("button",{onClick:()=>{if(c.current?.isEmpty())return void alert("Por favor, firme antes de guardar.");let b=c.current?.getTrimmedCanvas().toDataURL("image/png");b&&a(b)},className:"flex-1 bg-[#00ff9d]/10 border border-[#00ff9d]/20 text-[#00ff9d] font-bold py-3 px-4 rounded-2xl flex items-center justify-center gap-2 hover:bg-[#00ff9d] hover:text-black transition-all",children:[(0,z.jsx)(aX.CheckCircle2,{size:16}),(0,z.jsx)("span",{className:"text-[10px] uppercase tracking-widest",children:"Confirmar Firma"})]})]})]})}let aZ=new class{constructor(a){this.apiKey=a}getGenerativeModel(a,b){if(!a.model)throw new ac("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new aI(this.apiKey,a,b)}getGenerativeModelFromCachedContent(a,b,c){if(!a.name)throw new af("Cached content must contain a `name` field.");if(!a.model)throw new af("Cached content must contain a `model` field.");for(let c of["model","systemInstruction"])if((null==b?void 0:b[c])&&a[c]&&(null==b?void 0:b[c])!==a[c]){if("model"===c&&(b.model.startsWith("models/")?b.model.replace("models/",""):b.model)===(a.model.startsWith("models/")?a.model.replace("models/",""):a.model))continue;throw new af(`Different value for "${c}" specified in modelParams (${b[c]}) and cachedContent (${a[c]})`)}let d=Object.assign(Object.assign({},b),{model:a.model,tools:a.tools,toolConfig:a.toolConfig,systemInstruction:a.systemInstruction,cachedContent:a});return new aI(this.apiKey,d,c)}}("AIzaSyCXan_p6VbUAykQyiPsWhsuJHsExgSnSWM").getGenerativeModel({model:"gemini-1.5-flash"});function a$(){let a=(0,B.useRouter)(),b=(0,B.useParams)().id,[c,d]=(0,A.useState)(null),[e,f]=(0,A.useState)(""),[g,h]=(0,A.useState)(""),[i,j]=(0,A.useState)(null),[k,l]=(0,A.useState)(!1),[m,n]=(0,A.useState)(""),[o,p]=(0,A.useState)(!1),[q,r]=(0,A.useState)(!0),[s,t]=(0,A.useState)(!1),[u,v]=(0,A.useState)(!1),[w,x]=(0,A.useState)("0"),[y,F]=(0,A.useState)([]),[ab,ac]=(0,A.useState)([]),[ad,ae]=(0,A.useState)(!1),[af,ag]=(0,A.useState)("");(0,A.useEffect)(()=>{b&&ah()},[b]),(0,A.useEffect)(()=>{let a=localStorage.getItem("scanned_part_data");if(a)try{let c=JSON.parse(a);c.serviceId===b&&an(c),localStorage.removeItem("scanned_part_data")}catch(a){console.error("Error parsing scanned part:",a)}},[b,c]);let ah=async()=>{r(!0);try{let{data:a,error:c}=await C.supabase.from("service_orders").select(`
                    *,
                    client:clients(*),
                    equipment:equipment(*),
                    order_items(
                        id,
                        quantity,
                        price_at_time,
                        part:parts(id, name, code)
                    )
                `).eq("id",b).single();if(c)throw c;a&&(d(a),f(a.technical_diagnosis||""),x(a.labor_cost?.toString()||"0"),a.order_items&&F(a.order_items.map(a=>({...a.part,quantity:a.quantity,unit_price:a.price_at_time}))));let{data:e}=await C.supabase.from("parts").select("*").gt("stock_level",0);ac(e||[])}catch(a){console.error("Error loading order:",a)}finally{r(!1)}},ai=async a=>{if(b){t(!0);try{let{error:e}=await C.supabase.from("service_orders").update({status:a}).eq("id",b);if(e)throw e;if(d({...c,status:a}),"WAITING_PARTS"===a){let a=`Redacta un mensaje profesional de WhatsApp para el cliente "${c.client?.full_name}" informando que su equipo (${c.equipment?.brand} ${c.equipment?.type}) requiere un repuesto que no tenemos en stock actualmente.
                - Estado: Esperando Repuesto
                - Instrucciones: Corto, profesional, menciona que le avisaremos en cuanto llegue el repuesto. Usa emojis üì¶, üîß, ‚úÖ.`;p(!0),l(!0);try{let b=await aZ.generateContent(a),c=await b.response;n(c.text())}catch(a){n(`Hola ${c.client?.full_name}, le informamos que para proceder con la reparaci\xf3n de su ${c.equipment?.brand} ${c.equipment?.type} necesitamos pedir un repuesto. Le avisaremos en cuanto est\xe9 disponible. üì¶üîß`)}finally{p(!1)}}}catch(a){console.error("Error updating status:",a),alert("Error al actualizar el estado")}finally{t(!1)}}},aj=async()=>{ai("IN_PROGRESS")},ak=async()=>{if(c){l(!0),p(!0);try{let a=`Redacta un mensaje profesional de WhatsApp para el cliente "${c.client?.full_name}" confirmando su servicio t\xe9cnico de hoy.
            - Equipo: ${c.equipment?.brand} ${c.equipment?.type}
            - Problema: ${c.reported_issue}
            - Hora programada: ${new Date(c.scheduled_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}
            Instrucciones: Corto (m\xe1ximo 40 palabras), usa emojis (üîß, üìç, ‚úÖ), menciona que el t\xe9cnico ya tiene asignada la ruta. Sin etiquetas extra.`,b=await aZ.generateContent(a),d=await b.response;n(d.text())}catch(a){n(`Hola ${c.client?.full_name}, le confirmamos su visita t\xe9cnica para hoy. El t\xe9cnico se encuentra en ruta. \xa1Nos vemos pronto! üîß`)}finally{p(!1)}}},al=async()=>{if(!c)return;v(!0);let a=c.equipment?.type+" "+c.equipment?.brand,b=c.reported_issue,d=`Act\xfaa como un t\xe9cnico experto. Escribe una lista corta (m\xe1ximo 3 puntos) de recomendaciones de cuidado para el cliente sobre su ${a}, considerando que la falla fue: ${b}. 
    Usa un tono profesional pero amable. Formato: Vi\xf1etas con emojis.`;try{let a=await aZ.generateContent(d),b=await a.response;h(b.text())}catch(a){console.error("Error generating recommendations:",a)}finally{v(!1)}},am=async()=>{if(b){t(!0);try{let c=y.reduce((a,b)=>a+b.unit_price*b.quantity,0),d=Number(w)+c,f=new Date;f.setMonth(f.getMonth()+6);let{error:g}=await C.supabase.from("service_orders").update({technical_diagnosis:e,labor_cost:Number(w),status:"COMPLETED",completed_at:new Date().toISOString(),total_cost:d,next_maintenance_date:f.toISOString()}).eq("id",b);if(g)throw g;if(y.length>0){let a=y.map(a=>({order_id:b,part_id:a.id,quantity:a.quantity,price_at_time:a.unit_price})),{error:c}=await C.supabase.from("order_items").insert(a);if(c)throw c;for(let a of y){let{data:b}=await C.supabase.from("parts").select("stock_level").eq("id",a.id).single();b&&await C.supabase.from("parts").update({stock_level:b.stock_level-a.quantity}).eq("id",a.id)}}a.push(`/invoice-preview/${b}`)}catch(a){alert("Error al finalizar la orden: "+a.message)}finally{t(!1)}}},an=a=>{y.find(b=>b.id===a.id)?F(y.map(b=>b.id===a.id?{...b,quantity:b.quantity+1}:b)):F([...y,{...a,quantity:1}]),ae(!1)};return q?(0,z.jsxs)("div",{className:"bg-[#0a0c10] min-h-screen flex flex-col items-center justify-center text-white",children:[(0,z.jsx)("div",{className:"w-12 h-12 border-4 border-[#135bec]/30 border-t-[#135bec] rounded-full animate-spin mb-4"}),(0,z.jsx)("p",{className:"text-sm font-bold opacity-50",children:"Cargando detalles del servicio..."})]}):(0,z.jsxs)("div",{className:"relative flex h-full min-h-screen w-full flex-col max-w-md mx-auto shadow-2xl overflow-hidden bg-[#0a0c10] font-sans text-white border-x border-white/5",children:[(0,z.jsxs)("header",{className:"sticky top-0 z-[60] flex items-center justify-between bg-[#0a0c10]/95 backdrop-blur-md p-4 border-b border-white/5",children:[(0,z.jsx)("button",{onClick:()=>a.back(),className:"flex size-10 items-center justify-center rounded-2xl bg-white/5 hover:bg-white/10 transition-colors",children:(0,z.jsx)(D.ChevronLeft,{className:"text-gray-300",size:24})}),(0,z.jsxs)("div",{className:"flex flex-col items-center",children:[(0,z.jsx)("h2",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-[#135bec]",children:"Orden de Servicio"}),(0,z.jsx)("p",{className:"text-[10px] font-mono font-bold text-gray-500 uppercase tracking-widest",children:c?.order_number||"ORD-SYNC"})]}),(0,z.jsx)("button",{onClick:()=>a.push("/agenda"),className:"flex h-10 px-3 items-center justify-center rounded-2xl bg-rose-500/5 hover:bg-rose-500/10 transition-colors text-rose-500 text-[10px] font-black uppercase tracking-widest border border-rose-500/10",children:"Cancelar"})]}),(0,z.jsx)(aa.AnimatePresence,{mode:"wait",children:c?.status==="PENDING"?(0,z.jsxs)(_.motion.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"flex-1 overflow-y-auto",children:[(0,z.jsxs)("div",{className:"relative h-48 w-full group overflow-hidden",children:[(0,z.jsx)("div",{className:"absolute inset-0 bg-[url('https://www.google.com/maps/d/u/0/thumbnail?mid=1S95_X_M0Hk4q9C7E5N_W5J9t-s0&msa=0')] bg-cover bg-center grayscale opacity-40 group-hover:opacity-60 transition-opacity"}),(0,z.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0c10] to-transparent"}),(0,z.jsxs)(_.motion.button,{whileTap:{scale:.95},className:"absolute bottom-6 right-6 bg-[#135bec] hover:bg-blue-600 text-white px-6 py-3.5 rounded-[1.5rem] text-[10px] font-black uppercase tracking-widest flex items-center gap-3 shadow-2xl shadow-[#135bec]/40 transition-all",children:[(0,z.jsx)(T.Navigation,{size:16}),"Abrir Navegador GPS"]})]}),(0,z.jsxs)("main",{className:"px-6 -mt-6 relative z-10 space-y-6 pb-20",children:[(0,z.jsx)("div",{className:"bg-gray-900/40 border border-white/5 backdrop-blur-xl rounded-[2.5rem] p-5 flex items-center justify-between shadow-xl",children:(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)("div",{className:"size-12 rounded-2xl bg-[#135bec]/10 flex items-center justify-center text-[#135bec]",children:(0,z.jsx)(V,{size:24})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Estado Actual"}),(0,z.jsxs)("div",{className:"flex items-center gap-2 mt-0.5",children:[(0,z.jsx)("div",{className:"size-2 rounded-full bg-amber-500 animate-pulse"}),(0,z.jsx)("p",{className:"text-sm font-black text-white",children:"Pendiente de Activaci√≥n"})]})]})]})}),(0,z.jsxs)("div",{className:"bg-gray-900/20 border border-white/5 rounded-[3rem] p-8 space-y-8 animate-fade-in shadow-inner",children:[(0,z.jsxs)("div",{className:"flex justify-between items-start",children:[(0,z.jsxs)("div",{className:"space-y-2",children:[(0,z.jsx)("span",{className:"px-3 py-1 rounded-full bg-[#135bec]/10 text-[#135bec] text-[9px] font-black uppercase tracking-widest border border-[#135bec]/20",children:"Propietario"}),(0,z.jsx)("h1",{className:"text-2xl font-black text-white tracking-tight leading-tight",children:c.client?.full_name}),(0,z.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs",children:[(0,z.jsx)(S,{size:14,className:"text-rose-500"}),(0,z.jsx)("p",{className:"font-bold",children:c.client?.address})]})]}),(0,z.jsxs)("div",{className:"bg-gray-900/80 border border-white/10 rounded-3xl p-4 text-center min-w-[90px] shadow-2xl",children:[(0,z.jsx)("p",{className:"text-[9px] font-black text-[#135bec] uppercase tracking-[0.2em] mb-1",children:"Cita"}),(0,z.jsx)("p",{className:"text-xl font-black text-white font-mono",children:new Date(c.scheduled_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]}),(0,z.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,z.jsxs)("div",{className:"bg-white/5 rounded-3xl p-5 border border-white/5 flex gap-4",children:[(0,z.jsx)("div",{className:"size-10 rounded-2xl bg-orange-500/10 flex items-center justify-center text-orange-400 shrink-0",children:(0,z.jsx)(N.AlertCircle,{size:20})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-1",children:"Motivo de Visita"}),(0,z.jsxs)("p",{className:"text-sm font-bold text-gray-300 leading-relaxed italic",children:['"',c.reported_issue,'"']})]})]}),(0,z.jsxs)("div",{className:"bg-white/5 rounded-3xl p-5 border border-white/5 flex items-center gap-4",children:[(0,z.jsx)("div",{className:"size-10 rounded-2xl bg-[#00d4ff]/10 flex items-center justify-center text-[#00d4ff] shrink-0",children:(0,z.jsx)(E.Wrench,{size:20})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest mb-0.5",children:"Hardware"}),(0,z.jsxs)("p",{className:"text-sm font-black text-white uppercase tracking-tight",children:[c.equipment?.brand," ",c.equipment?.type]})]})]})]})]}),(0,z.jsxs)("div",{className:"space-y-4 pt-6 pb-10",children:[(0,z.jsxs)(_.motion.button,{whileTap:{scale:.98},onClick:ak,className:"w-full py-5 bg-[#135bec] hover:bg-blue-600 rounded-[1.8rem] text-white font-black flex items-center justify-center gap-4 shadow-[0_15px_40px_rgba(19,91,236,0.3)] transition-all group",children:[(0,z.jsx)("div",{className:"size-8 rounded-xl bg-white/10 flex items-center justify-center group-hover:rotate-12 transition-transform",children:(0,z.jsx)(W.CheckCircle,{size:20})}),(0,z.jsx)("span",{className:"uppercase tracking-[0.2em] text-sm",children:"Validar y Confirmar"})]}),(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,z.jsxs)(_.motion.button,{whileTap:{scale:.95},onClick:()=>window.open(`tel:${c.client?.phone}`,"_self"),className:"py-4 bg-gray-900 hover:bg-gray-800 border border-white/5 rounded-[1.5rem] flex items-center justify-center gap-3 text-gray-400 font-black transition-all",children:[(0,z.jsx)(R.Phone,{size:18}),(0,z.jsx)("span",{className:"text-[10px] uppercase tracking-widest",children:"Llamar"})]}),(0,z.jsxs)(_.motion.button,{whileTap:{scale:.95},onClick:()=>a.push("/ai-assistant"),className:"py-4 bg-gray-900 hover:bg-gray-800 border border-white/5 rounded-[1.5rem] flex items-center justify-center gap-3 text-[#00ff9d] font-black transition-all",children:[(0,z.jsx)(K.Bot,{size:18}),(0,z.jsx)("span",{className:"text-[10px] uppercase tracking-widest",children:"Asistente"})]})]}),(0,z.jsx)("button",{onClick:aj,className:"w-full py-2 text-[10px] font-bold text-gray-600 hover:text-white uppercase tracking-[0.4em] transition-colors",children:"Omitir Confirmaci√≥n e Iniciar"})]})]})]},"pre-visit"):(0,z.jsxs)(_.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"flex-1 overflow-y-auto",children:[(0,z.jsxs)("div",{className:"px-6 py-4 bg-[#135bec]/10 border-b border-[#135bec]/20 flex items-center justify-center gap-3 shadow-inner",children:[(0,z.jsx)("div",{className:"size-2 rounded-full bg-[#00ff9d] shadow-[0_0_10px_#00ff9d]"}),(0,z.jsx)("span",{className:"text-[10px] font-black text-[#135bec] uppercase tracking-[0.3em]",children:"Servicio en Ejecuci√≥n"})]}),(0,z.jsxs)("div",{className:"flex-1 flex flex-col w-full space-y-10 py-10 overflow-y-auto pb-44",children:[c&&(0,z.jsxs)("section",{className:"px-6 space-y-4",children:[(0,z.jsxs)("div",{className:"bg-gray-900/60 border border-white/10 rounded-[2.5rem] p-6 flex items-center gap-6 shadow-2xl relative overflow-hidden group",children:[(0,z.jsx)("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-[#135bec]/30"}),(0,z.jsx)("div",{className:"size-16 rounded-[1.5rem] bg-[#135bec]/10 border border-[#135bec]/20 flex items-center justify-center text-[#135bec] shadow-inner",children:(0,z.jsx)(E.Wrench,{size:32})}),(0,z.jsxs)("div",{className:"flex-1",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsxs)("h3",{className:"font-black text-xl leading-tight text-white",children:[c.equipment?.brand," ",c.equipment?.type]}),c.is_warranty&&(0,z.jsx)("span",{className:"bg-amber-500/10 text-amber-500 text-[8px] px-2 py-0.5 rounded-full font-black uppercase border border-amber-500/20",children:"Garant√≠a"})]}),(0,z.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,z.jsx)(U.User,{size:10,className:"text-[#135bec]"}),(0,z.jsx)("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:c.client?.full_name})]})]})]}),(0,z.jsxs)("div",{className:"p-1 px-1.5 bg-black/40 rounded-2xl border border-gray-800 flex gap-2",children:[(0,z.jsx)("button",{onClick:()=>ai("IN_PROGRESS"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${"IN_PROGRESS"===c.status?"bg-[#135bec] text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:"En Proceso"}),(0,z.jsx)("button",{onClick:()=>ai("WAITING_PARTS"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${"WAITING_PARTS"===c.status?"bg-amber-500 text-white shadow-lg":"text-gray-500 hover:text-white"}`,children:"En Repuestos"})]}),"WAITING_PARTS"===c.status&&(0,z.jsx)("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-2xl animate-pulse",children:(0,z.jsx)("p",{className:"text-[10px] font-black text-amber-500 uppercase tracking-widest text-center",children:"Alerta de WhatsApp Activada para Repuestos"})})]}),(0,z.jsxs)("section",{className:"px-6 space-y-4",children:[(0,z.jsxs)("label",{className:"flex items-center gap-3 text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] px-1",children:[(0,z.jsx)(G,{className:"text-[#135bec]",size:18}),(0,z.jsx)("span",{children:"Informe T√©cnico Profesional"})]}),(0,z.jsxs)("div",{className:"relative group",children:[(0,z.jsx)("textarea",{className:"w-full rounded-[2.5rem] border border-white/5 bg-gray-900/30 focus:border-[#135bec] focus:bg-gray-900/50 text-base min-h-[180px] p-6 text-white placeholder:text-gray-700 resize-none transition-all shadow-inner outline-none leading-relaxed",placeholder:"Describa el hallazgo t√©cnico, pruebas realizadas y resoluci√≥n...",value:e,onChange:a=>f(a.target.value)}),(0,z.jsx)(_.motion.button,{whileTap:{scale:.9},className:"absolute bottom-5 right-5 p-4 bg-gray-900/80 backdrop-blur-md text-[#135bec] hover:text-white hover:bg-[#135bec] rounded-2xl transition-all shadow-xl border border-white/5",children:(0,z.jsx)(H.Mic,{size:24})})]})]}),(0,z.jsxs)("section",{className:"px-6 space-y-4",children:[(0,z.jsxs)("label",{className:"flex items-center gap-3 text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] px-1",children:[(0,z.jsx)(P.Wallet,{className:"text-[#00ff9d]",size:18}),"Liquidaci√≥n de Mano de Obra"]}),(0,z.jsxs)("div",{className:"relative group",children:[(0,z.jsx)("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-gray-600 font-black text-xl",children:"$"}),(0,z.jsx)("input",{type:"number",value:w,onChange:a=>x(a.target.value),className:"w-full bg-gray-900/30 rounded-[1.8rem] py-6 pl-12 pr-6 text-2xl font-black border border-white/5 focus:border-[#00ff9d] focus:bg-gray-900/50 outline-none transition-all placeholder:text-gray-800",placeholder:"0"})]})]}),(0,z.jsxs)("section",{className:"px-6 space-y-4",children:[(0,z.jsxs)("label",{className:"flex items-center gap-3 text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] px-1",children:[(0,z.jsx)(K.Bot,{className:"text-[#00ff9d]",size:18}),"Recomendaciones IA para Cliente"]}),(0,z.jsxs)("div",{className:"bg-gray-900/40 border border-white/5 rounded-[2.5rem] p-6 space-y-5 shadow-inner",children:[(0,z.jsx)("div",{className:"relative min-h-[100px] bg-black/20 rounded-2xl border border-white/5 p-4",children:u?(0,z.jsxs)("div",{className:"flex flex-col items-center justify-center h-20 gap-3",children:[(0,z.jsx)("div",{className:"size-5 border-2 border-[#00ff9d]/30 border-t-[#00ff9d] rounded-full animate-spin"}),(0,z.jsx)("p",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest animate-pulse",children:"ServiBot IA est√° redactando..."})]}):(0,z.jsx)("textarea",{className:"w-full h-full bg-transparent text-sm text-gray-300 placeholder:text-gray-700 resize-none outline-none leading-relaxed font-medium no-scrollbar",placeholder:"Genera sugerencias personalizadas de mantenimiento post-reparaci√≥n...",value:g,onChange:a=>h(a.target.value)})}),(0,z.jsxs)(_.motion.button,{whileTap:{scale:.95},onClick:al,disabled:u,className:"w-full bg-gradient-to-r from-[#135bec] to-indigo-600 py-4 rounded-2xl flex items-center justify-center gap-3 shadow-lg shadow-[#135bec]/20 disabled:opacity-50",children:[(0,z.jsx)($.Sparkles,{size:18,className:"text-[#00ff9d]"}),(0,z.jsx)("span",{className:"text-[10px] font-black text-white uppercase tracking-[0.2em]",children:"Sugerir Cuidado del Equipo"})]})]})]}),(0,z.jsxs)("section",{className:"px-6 space-y-6",children:[(0,z.jsxs)("label",{className:"flex items-center gap-3 text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] px-1",children:[(0,z.jsx)(I.Box,{className:"text-[#135bec]",size:18}),"Componentes Remplazados"]}),(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsx)(aa.AnimatePresence,{children:y.map(a=>(0,z.jsxs)(_.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"flex items-center justify-between p-5 bg-gray-900/40 rounded-[2rem] border border-white/5 shadow-inner",children:[(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)("div",{className:"size-12 rounded-2xl bg-gray-900 border border-white/10 flex items-center justify-center text-gray-500",children:(0,z.jsx)(I.Box,{size:24})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h4",{className:"text-sm font-black text-white",children:a.name}),(0,z.jsxs)("p",{className:"text-[10px] text-gray-600 font-bold uppercase tracking-widest mt-0.5",children:[a.quantity," UND ‚Ä¢ $",a.unit_price?.toLocaleString()," C/U"]})]})]}),(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsxs)("p",{className:"text-sm font-black text-[#00ff9d]",children:["$",(a.unit_price*a.quantity).toLocaleString()]}),(0,z.jsx)("button",{onClick:()=>{var b;return b=a.id,void F(y.filter(a=>a.id!==b))},className:"size-10 flex items-center justify-center rounded-xl bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white transition-all",children:(0,z.jsx)(O.XCircle,{size:18})})]})]},a.id))}),(0,z.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,z.jsxs)(_.motion.button,{whileTap:{scale:.98},onClick:()=>ae(!0),className:"flex items-center justify-center gap-4 rounded-[2rem] border-2 border-dashed border-gray-800 py-6 text-gray-500 hover:border-[#135bec] hover:text-[#135bec] transition-all group bg-gray-900/10",children:[(0,z.jsx)(J.PlusCircle,{className:"group-hover:rotate-90 transition-transform",size:24}),(0,z.jsx)("span",{className:"font-black text-[10px] uppercase tracking-[0.3em]",children:"Stock"})]}),(0,z.jsxs)(_.motion.button,{whileTap:{scale:.98},onClick:()=>a.push(`/scanner?context=service_order&id=${b}`),className:"flex items-center justify-center gap-4 rounded-[2rem] border-2 border-dashed border-rose-500/20 py-6 text-gray-500 hover:border-rose-500 hover:text-rose-500 transition-all group bg-rose-500/[0.02]",children:[(0,z.jsx)(Z.QrCode,{className:"group-hover:scale-110 transition-transform text-rose-500",size:24}),(0,z.jsx)("span",{className:"font-black text-[10px] uppercase tracking-[0.3em]",children:"IA Scan"})]})]})]})]}),(0,z.jsxs)("section",{className:"px-6 space-y-4",children:[(0,z.jsxs)("label",{className:"flex items-center gap-3 text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] px-1",children:[(0,z.jsx)(Y,{className:"text-[#135bec]",size:18}),"Facturaci√≥n y Cobro"]}),(0,z.jsxs)("div",{className:"bg-gray-900/40 border border-dashed border-white/10 rounded-[2.5rem] p-6 flex items-center justify-between group hover:border-[#135bec]/40 transition-all cursor-pointer shadow-inner",children:[(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)("div",{className:"size-12 rounded-2xl bg-gray-800/80 flex items-center justify-center text-gray-500 group-hover:text-[#135bec] transition-colors shadow-lg",children:(0,z.jsx)(I.Box,{size:20})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-sm font-black text-white",children:"Factura de Servicio"}),(0,z.jsx)("p",{className:"text-[9px] text-gray-600 font-black uppercase tracking-widest mt-0.5",children:"Pendiente de Generaci√≥n"})]})]}),(0,z.jsx)(_.motion.button,{whileTap:{scale:.9},onClick:()=>a.push(`/invoice-preview/${b}`),className:"h-10 px-5 rounded-xl bg-gray-900 border border-white/5 text-[#00ff9d] text-[10px] font-black uppercase tracking-widest hover:bg-[#00ff9d] hover:text-black transition-all shadow-xl",children:"Pre-visualizar"})]})]}),(0,z.jsxs)("section",{className:"px-6 pb-20 space-y-6",children:[(0,z.jsxs)("label",{className:"flex items-center gap-3 text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] px-1",children:[(0,z.jsx)(X,{className:"text-[#135bec]",size:18}),"Conformidad y Firma Digital"]}),(0,z.jsx)("div",{className:"bg-gray-900/40 border border-white/5 rounded-[3rem] p-2 shadow-inner overflow-hidden",children:(0,z.jsx)(aY,{onSave:a=>j(a),onClear:()=>j(null)})})]})]}),(0,z.jsx)("div",{className:"fixed bottom-0 left-0 right-0 max-w-md mx-auto z-[70] bg-[#0a0c10]/80 backdrop-blur-2xl border-t border-white/5 p-8 animate-in slide-in-from-bottom duration-500 pt-6",children:(0,z.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,z.jsxs)("div",{className:"flex justify-between items-end px-2",children:[(0,z.jsxs)("div",{className:"space-y-1",children:[(0,z.jsx)("span",{className:"text-[9px] font-black text-gray-500 uppercase tracking-widest block",children:"Liquidaci√≥n Estimada"}),(0,z.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,z.jsx)("span",{className:"text-sm text-[#135bec] font-black",children:"TOTAL"}),(0,z.jsxs)("span",{className:"text-2xl font-black text-white tracking-tighter",children:["$",(Number(w||0)+y.reduce((a,b)=>a+b.unit_price*b.quantity,0)).toLocaleString()]})]})]}),(0,z.jsxs)("div",{className:"text-right",children:[(0,z.jsx)("span",{className:"text-[9px] font-black text-[#00ff9d] uppercase tracking-widest block mb-1",children:"Stock Aplicado"}),(0,z.jsxs)("p",{className:"text-xs font-bold text-gray-400",children:["$",y.reduce((a,b)=>a+b.unit_price*b.quantity,0).toLocaleString()]})]})]}),(0,z.jsx)(_.motion.button,{whileTap:{scale:.95},onClick:am,disabled:s,className:"w-full bg-[#135bec] text-white font-black py-5 px-8 rounded-[2rem] shadow-[0_20px_40px_rgba(19,91,236,0.3)] transition-all flex items-center justify-center gap-4 relative overflow-hidden group",children:s?(0,z.jsx)("div",{className:"size-6 border-4 border-white/30 border-t-white rounded-full animate-spin"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{className:"text-sm uppercase tracking-[0.3em]",children:"Cerrar y Facturar"}),(0,z.jsx)(Y,{size:20}),(0,z.jsx)(_.motion.div,{className:"absolute inset-0 bg-white/10 -translate-x-full group-hover:translate-x-full transition-transform duration-700 skew-x-12"})]})})]})})]},"execution")}),(0,z.jsx)(aa.AnimatePresence,{children:k&&(0,z.jsx)("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/95 backdrop-blur-2xl p-6",children:(0,z.jsxs)(_.motion.div,{initial:{scale:.9,opacity:0,y:30},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:30},className:"bg-[#0f1115] w-full max-w-sm rounded-[3.5rem] border border-white/10 shadow-[0_50px_100px_rgba(0,0,0,0.8)] overflow-hidden",children:[(0,z.jsxs)("div",{className:"p-8 border-b border-white/5 bg-[#135bec]/5 flex justify-between items-center",children:[(0,z.jsxs)("div",{className:"flex items-center gap-4",children:[(0,z.jsx)("div",{className:"size-14 rounded-2xl bg-[#00ff9d]/10 flex items-center justify-center text-[#00ff9d] shadow-inner",children:(0,z.jsx)(Q.MessageCircle,{size:28})}),(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"font-black text-lg text-white leading-tight",children:"ServiBot IA"}),(0,z.jsx)("p",{className:"text-[9px] text-gray-500 font-black uppercase tracking-widest mt-0.5",children:"WhatsApp Predictivo"})]})]}),(0,z.jsx)("button",{onClick:()=>l(!1),className:"size-10 flex items-center justify-center rounded-2xl bg-gray-900 border border-white/5 text-gray-600 hover:text-white",children:(0,z.jsx)(O.XCircle,{size:20})})]}),(0,z.jsxs)("div",{className:"p-8 space-y-8",children:[(0,z.jsxs)("div",{className:"relative group",children:[(0,z.jsxs)("div",{className:`bg-[#0b141a] rounded-[2rem] rounded-tl-none border border-white/10 p-6 shadow-2xl transition-all ${o?"blur-[4px] opacity-40":""}`,children:[(0,z.jsx)("textarea",{value:m,onChange:a=>n(a.target.value),className:"w-full h-40 bg-transparent text-gray-200 text-sm leading-relaxed resize-none outline-none no-scrollbar font-bold",placeholder:"Redactando mensaje..."}),(0,z.jsxs)("div",{className:"flex justify-end items-center gap-2 mt-4",children:[(0,z.jsx)($.Sparkles,{size:12,className:"text-[#135bec]"}),(0,z.jsx)("span",{className:"text-[10px] text-gray-600 font-black uppercase tracking-widest",children:"IA Engine Optimized"})]})]}),(0,z.jsx)("div",{className:"absolute -top-[1px] -left-3 w-4 h-4 bg-[#0b141a] border-l border-t border-white/10",style:{clipPath:"polygon(100% 0, 0 0, 100% 100%)"}})]}),(0,z.jsxs)("div",{className:"space-y-4",children:[(0,z.jsxs)(_.motion.button,{whileTap:{scale:.95},onClick:()=>{let a=encodeURIComponent(m),b=c.client?.phone?.replace(/\D/g,"");window.open(`https://wa.me/${b}?text=${a}`,"_blank"),aj(),l(!1)},disabled:o||!m,className:"w-full h-16 bg-[#00ff9d] hover:bg-[#00e08b] text-black font-black rounded-2xl shadow-[0_15px_30px_rgba(0,255,157,0.2)] flex items-center justify-center gap-4 transition-all disabled:opacity-50",children:[(0,z.jsx)(L.Check,{size:24}),(0,z.jsx)("span",{className:"text-sm uppercase tracking-widest",children:"Enviar y Activar"})]}),(0,z.jsx)("button",{onClick:()=>l(!1),className:"w-full py-2 text-gray-500 hover:text-white font-black text-[9px] uppercase tracking-[0.4em] transition-colors",children:"Corregir Manualmente"})]})]}),o&&(0,z.jsx)("div",{className:"h-1.5 w-full bg-gray-900 absolute bottom-0",children:(0,z.jsx)(_.motion.div,{animate:{x:["-100%","100%"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},className:"h-full w-1/2 bg-[#135bec] shadow-[0_0_15px_#135bec]"})})]})})}),(0,z.jsx)(aa.AnimatePresence,{children:ad&&(0,z.jsx)(_.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[150] bg-black/90 backdrop-blur-xl flex items-end justify-center p-6",children:(0,z.jsxs)(_.motion.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"w-full max-w-md bg-[#0d0f14] border-t border-white/10 rounded-t-[4rem] p-10 max-h-[85vh] flex flex-col shadow-[0_-50px_100px_rgba(0,0,0,0.5)]",children:[(0,z.jsx)("div",{className:"absolute top-5 left-1/2 -translate-x-1/2 w-14 h-1.5 bg-gray-800 rounded-full"}),(0,z.jsxs)("div",{className:"flex items-center justify-between mb-10",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("h3",{className:"text-2xl font-black text-white tracking-tight",children:"Seleccionar Repuestos"}),(0,z.jsx)("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest mt-1",children:"Inventario Central Pro"})]}),(0,z.jsx)(_.motion.button,{whileTap:{scale:.9},onClick:()=>ae(!1),className:"size-12 flex items-center justify-center rounded-2xl bg-gray-900 border border-white/10 text-gray-500",children:(0,z.jsx)(O.XCircle,{size:24})})]}),(0,z.jsxs)("div",{className:"relative mb-10 group",children:[(0,z.jsx)(M.Search,{className:"absolute left-6 top-1/2 -translate-y-1/2 text-gray-600 group-focus-within:text-[#135bec] transition-colors",size:20}),(0,z.jsx)("input",{type:"text",placeholder:"Nombre o c√≥digo de pieza...",className:"w-full bg-gray-900/50 border border-white/5 rounded-[1.8rem] py-6 pl-14 pr-6 text-sm focus:border-[#135bec] focus:bg-gray-900 outline-none transition-all placeholder:text-gray-700",value:af,onChange:a=>ag(a.target.value)})]}),(0,z.jsx)("div",{className:"flex-1 overflow-y-auto space-y-4 no-scrollbar pb-10",children:ab.filter(a=>a.name.toLowerCase().includes(af.toLowerCase())).map((a,b)=>(0,z.jsxs)(_.motion.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*b},onClick:()=>an(a),className:"w-full flex items-center justify-between p-6 bg-gray-900/30 border border-white/5 rounded-[2.5rem] hover:bg-gray-900 hover:border-white/10 transition-all text-left group overflow-hidden relative",children:[(0,z.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-[#135bec] opacity-0 group-hover:opacity-100 transition-opacity"}),(0,z.jsxs)("div",{className:"flex items-center gap-5",children:[(0,z.jsx)("div",{className:"size-14 rounded-[1.3rem] bg-gray-900 border border-white/5 flex items-center justify-center text-[#135bec] font-black text-base shadow-inner",children:a.code.substring(0,2)}),(0,z.jsxs)("div",{children:[(0,z.jsx)("p",{className:"text-base font-black text-white",children:a.name}),(0,z.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,z.jsxs)("span",{className:"text-[10px] text-[#00ff9d] font-black uppercase tracking-widest",children:["STOCK ",a.stock_level]}),(0,z.jsx)("div",{className:"size-1 rounded-full bg-gray-700"}),(0,z.jsx)("span",{className:"text-[10px] text-gray-600 font-bold uppercase",children:a.code})]})]})]}),(0,z.jsxs)("div",{className:"text-right",children:[(0,z.jsxs)("p",{className:"text-lg font-black text-white tracking-tight",children:["$",a.unit_price.toLocaleString()]}),(0,z.jsx)("div",{className:"size-8 rounded-full bg-gray-900 border border-white/5 flex items-center justify-center text-[#135bec] ml-auto mt-2 pointer-events-none",children:(0,z.jsx)(J.PlusCircle,{size:18})})]})]},a.id))})]})})})]})}a.s(["default",()=>a$],96166)}];

//# sourceMappingURL=_72c5a5ab._.js.map