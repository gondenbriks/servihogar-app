module.exports=[24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},92258,a=>{"use strict";let b=(0,a.i(70106).default)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);a.s(["Mail",()=>b],92258)},63519,a=>{"use strict";let b=(0,a.i(70106).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);a.s(["Phone",()=>b],63519)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);a.s(["Users",()=>b],60246)},24669,a=>{"use strict";let b=(0,a.i(70106).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],24669)},65066,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(46271),f=a.i(62036),g=a.i(21161);let h=(0,a.i(70106).default)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);var i=a.i(60246),j=a.i(79808),k=a.i(24669),l=a.i(24987),m=a.i(63519),n=a.i(92258),o=a.i(78560),p=a.i(2084);function q(){let a=(0,d.useRouter)(),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)({employees:0,services:0,earnings:"0"}),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)({type:"",account_number:"",bank_name:"",holder_name:""});(0,c.useEffect)(()=>{G()},[]);let G=async()=>{r(!0);try{let{data:a,error:b}=await o.supabase.from("business_profiles").select("*").limit(1);if(b)throw b;if(a&&a.length>0){let b=a[0];x(b);let{data:c}=await o.supabase.from("payment_methods").select("*").eq("business_id",b.id);z(c||[])}H()}catch(a){console.error("Error loading profile data:",a)}finally{r(!1)}},H=async()=>{try{let{count:a}=await o.supabase.from("technicians").select("*",{count:"exact",head:!0}),{data:b,count:c}=await o.supabase.from("service_orders").select("total_cost",{count:"exact"}),d=b?.reduce((a,b)=>a+(Number(b.total_cost)||0),0)||0;B({employees:a||0,services:c||0,earnings:d>1e3?`${(d/1e3).toFixed(1)}k`:`${d}`})}catch(a){console.error("Error fetching stats:",a)}},I=async()=>{if(w){t(!0);try{let{error:a}=await o.supabase.from("business_profiles").update({name:w.name,tax_id:w.tax_id,address:w.address,phone:w.phone,email:w.email}).eq("id",w.id);if(a)throw a;v(!1)}catch(a){console.error("Error updating profile:",a),alert("Error al guardar el perfil")}finally{t(!1)}}},J=async()=>{if(E.type&&w){t(!0);try{let{data:a,error:b}=await o.supabase.from("payment_methods").insert([{business_id:w.id,type:E.type,bank_name:E.bank_name,account_number:E.account_number,holder_name:E.holder_name,is_active:!0}]).select();if(b)throw b;a&&z(b=>[...b,a[0]]),D(!1),F({type:"",account_number:"",bank_name:"",holder_name:""})}catch(a){console.error("Error adding payment method:",a),alert("Error al agregar el método de pago")}finally{t(!1)}}};return q?(0,b.jsxs)("div",{className:"bg-[#050608] min-h-screen flex flex-col items-center justify-center text-white font-sans",children:[(0,b.jsx)("div",{className:"w-10 h-10 border-2 border-primary/20 border-t-primary rounded-full animate-spin mb-4"}),(0,b.jsx)("p",{className:"text-[10px] font-black uppercase tracking-[0.3em] opacity-50",children:"Sincronizando..."})]}):(0,b.jsxs)("div",{className:"bg-[#050608] min-h-screen text-white pb-24 max-w-5xl mx-auto font-sans overflow-x-hidden relative border-x border-white/5",children:[(0,b.jsx)(p.default,{title:"Corporativo",showBack:!0,rightElement:(0,b.jsx)(e.motion.button,{whileTap:{scale:.9},onClick:()=>a.push("/settings"),className:"size-11 flex items-center justify-center rounded-2xl bg-white/5 border border-white/10",children:(0,b.jsx)(g.Settings,{size:20})})}),(0,b.jsxs)("div",{className:"relative h-48 w-full",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-[#135bec]/20 to-transparent z-0"}),(0,b.jsx)("div",{className:"absolute -bottom-12 left-0 w-full px-6 z-10",children:(0,b.jsxs)("div",{className:"flex items-end gap-5",children:[(0,b.jsx)("div",{className:"size-24 rounded-[2rem] bg-[#0a0c12] border-4 border-[#050608] shadow-2xl flex items-center justify-center",children:(0,b.jsx)(h,{size:40,className:"text-[#135bec]"})}),(0,b.jsxs)("div",{className:"flex-1 pb-2",children:[(0,b.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-[#135bec]",children:"EMPRESA VERIFICADA"}),(0,b.jsx)("h1",{className:"text-xl font-black text-white leading-none mt-1",children:w.name})]})]})})]}),(0,b.jsxs)("main",{className:"mt-16 px-6 space-y-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center bg-white/[0.02] border border-white/5 p-5 rounded-3xl",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:"ID FISCAL"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 font-mono mt-1",children:w.tax_id||"N/A"})]}),(0,b.jsx)(e.motion.button,{whileTap:{scale:.95},onClick:()=>u?I():v(!0),className:`px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest ${u?"bg-emerald-500 text-white":"bg-[#135bec] text-white"}`,children:s?"...":u?"Guardar":"Editar"})]}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[{label:"Técnicos",val:A.employees,icon:(0,b.jsx)(i.Users,{size:20}),color:"text-cyan-400",bg:"bg-cyan-400/10"},{label:"Servicios",val:A.services,icon:(0,b.jsx)(j.Wrench,{size:20}),color:"text-orange-400",bg:"bg-orange-400/10"},{label:"Ingresos",val:`$${A.earnings}`,icon:(0,b.jsx)(k.TrendingUp,{size:20}),color:"text-emerald-400",bg:"bg-emerald-400/10"}].map((a,c)=>(0,b.jsxs)("div",{className:"bg-white/[0.02] p-5 rounded-[2rem] border border-white/5 flex flex-col items-center justify-center",children:[(0,b.jsx)("div",{className:`size-10 rounded-xl ${a.bg} ${a.color} flex items-center justify-center mb-2`,children:a.icon}),(0,b.jsx)("span",{className:"text-lg font-black text-white",children:a.val}),(0,b.jsx)("span",{className:"text-[9px] text-gray-500 uppercase font-black",children:a.label})]},c))}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.3em] px-2",children:"Información de Contacto"}),(0,b.jsx)("div",{className:"bg-white/[0.02] rounded-[2.5rem] p-6 border border-white/5 space-y-6",children:[{label:"Dirección",val:w.address,icon:(0,b.jsx)(l.MapPin,{size:18}),key:"address"},{label:"Teléfono",val:w.phone,icon:(0,b.jsx)(m.Phone,{size:18}),key:"phone"},{label:"Email",val:w.email,icon:(0,b.jsx)(n.Mail,{size:18}),key:"email"}].map((a,c)=>(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"size-10 rounded-2xl bg-[#0a0c12] border border-white/5 flex items-center justify-center text-gray-500",children:a.icon}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-[9px] text-gray-500 font-bold uppercase tracking-widest",children:a.label}),u?(0,b.jsx)("input",{value:a.val||"",onChange:b=>x({...w,[a.key]:b.target.value}),className:"w-full bg-white/5 border border-white/10 rounded-xl p-2.5 text-xs text-white mt-1"}):(0,b.jsx)("p",{className:"text-sm text-gray-200 font-medium mt-1",children:a.val||"---"})]})]},c))})]})]}),(0,b.jsx)(f.AnimatePresence,{children:C&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[(0,b.jsx)(e.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>D(!1),className:"absolute inset-0 bg-black/80 backdrop-blur-md"}),(0,b.jsxs)(e.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-[#0a0c12] w-full max-w-sm rounded-[2.5rem] border border-white/10 p-8 relative z-10",children:[(0,b.jsx)("h3",{className:"font-black text-white uppercase tracking-widest text-xs mb-6",children:"Nuevo Método de Pago"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("input",{placeholder:"Tipo (Zelle, Nequi...)",value:E.type,onChange:a=>F({...E,type:a.target.value}),className:"w-full bg-[#050608] border border-white/5 rounded-2xl p-4 text-xs text-white"}),(0,b.jsx)("input",{placeholder:"Banco",value:E.bank_name,onChange:a=>F({...E,bank_name:a.target.value}),className:"w-full bg-[#050608] border border-white/5 rounded-2xl p-4 text-xs text-white"}),(0,b.jsx)("input",{placeholder:"Número de cuenta",value:E.account_number,onChange:a=>F({...E,account_number:a.target.value}),className:"w-full bg-[#050608] border border-white/5 rounded-2xl p-4 text-xs text-white"}),(0,b.jsx)("input",{placeholder:"Titular",value:E.holder_name,onChange:a=>F({...E,holder_name:a.target.value}),className:"w-full bg-[#050608] border border-white/5 rounded-2xl p-4 text-xs text-white"}),(0,b.jsx)("button",{onClick:J,className:"w-full py-4 bg-[#135bec] rounded-2xl font-black text-white uppercase tracking-widest text-[10px] mt-4",children:"Vincular Método"})]})]})]})})]})}a.s(["default",()=>q],65066)}];

//# sourceMappingURL=_c5a1aa88._.js.map