module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},70106,a=>{"use strict";var b=a.i(72131);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim();var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let e=(0,b.forwardRef)(({color:a="currentColor",size:e=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...d,width:e,height:e,stroke:a,strokeWidth:g?24*Number(f)/Number(e):f,className:c("lucide",h),...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),f=(a,d)=>{let f=(0,b.forwardRef)(({className:f,...g},h)=>(0,b.createElement)(e,{ref:h,iconNode:d,className:c(`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,f),...g}));return f.displayName=`${a}`,f};a.s(["default",()=>f],70106)},13749,a=>{"use strict";let b=(0,a.i(70106).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],13749)},78560,a=>{"use strict";let b=(0,a.i(83160).createClient)("https://bajynifnwzsicuxdxigk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhanluaWZud3pzaWN1eGR4aWdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5NDUxOTUsImV4cCI6MjA4NDUyMTE5NX0.RCN56FnpfNlwZNpynKROKasTFT_ZYNIGfc2Zurvfbrk");a.s(["supabase",0,b])},79808,a=>{"use strict";let b=(0,a.i(70106).default)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);a.s(["Wrench",()=>b],79808)},67453,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],67453)},46842,a=>{"use strict";let b=(0,a.i(70106).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},41675,a=>{"use strict";let b=(0,a.i(70106).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],41675)},4720,a=>{"use strict";let b=(0,a.i(70106).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],4720)},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},81560,a=>{"use strict";let b=(0,a.i(70106).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],81560)},91113,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(78560),f=a.i(13749),g=a.i(4720),h=a.i(70106);let i=(0,h.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var j=a.i(67453),k=a.i(92e3);let l=(0,h.default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var m=a.i(81560),n=a.i(41675),o=a.i(46842),p=a.i(79808),q=a.i(75750);function r(){let a=(0,d.useRouter)(),[h,r]=(0,c.useState)([]),[s,t]=(0,c.useState)(!1),u=(0,c.useRef)(null),v=()=>{let a=[{Cedula:"12345678",Nombre:"Cliente Ejemplo",Telefono:"3001234567",Direccion:"Calle 10 # 5-20, Cali",Tipo:"Nevera",Marca:"Samsung",Serial:"SN-SAMS-9988",Falla:"No enfría la parte inferior",Fecha:new Date().toISOString().split("T")[0],Hora:"10:00",Prioridad:"NORMAL","Tipo Servicio":"REPAIR"},{Cedula:"87654321",Nombre:"Empresa ABC",Telefono:"3109876543",Direccion:"Av. Siempre Viva 123",Tipo:"Aire Acondicionado",Marca:"LG",Serial:"SN-LG-5544",Falla:"Mantenimiento preventivo anual",Fecha:new Date().toISOString().split("T")[0],Hora:"14:30",Prioridad:"URGENT","Tipo Servicio":"MAINTENANCE"}],b=q.utils.json_to_sheet(a),c=q.utils.book_new();q.utils.book_append_sheet(c,b,"Plantilla ServiTech"),q.writeFile(c,"Plantilla_Servicios_ServiTech.xlsx")},w=async()=>{t(!0);let a=[...h];for(let b=0;b<a.length;b++){let c=a[b];if("success"!==c.status){a[b].status="processing",r([...a]);try{let{data:d,error:f}=await e.supabase.from("clients").upsert({national_id:c.national_id,full_name:c.full_name,phone:c.phone,address:c.address,category:"REGULAR"},{onConflict:"national_id"}).select().single();if(f)throw f;let{data:g,error:h}=await e.supabase.from("equipment").upsert({client_id:d.id,type:c.equipment_type,brand:c.brand,model:"Estandar",serial_number:c.serial_number},{onConflict:"serial_number"}).select().single();if(h)throw h;let i=`${c.date}T${c.time}:00`,{error:j}=await e.supabase.from("service_orders").insert({client_id:d.id,equipment_id:g.id,status:"PENDING",reported_issue:c.reported_issue,service_type:c.service_type,priority:["LOW","NORMAL","HIGH","URGENT"].includes(c.priority)?c.priority:"NORMAL",scheduled_at:i,order_number:`ORD-${Math.floor(1e3+9e3*Math.random())}-IMP`});if(j)throw j;a[b].status="success"}catch(c){a[b].status="error",a[b].error=c.message}r([...a])}}t(!1)};return(0,b.jsxs)("div",{className:"bg-[#0a0c10] min-h-screen text-white font-sans max-w-2xl mx-auto pb-32",children:[(0,b.jsxs)("header",{className:"sticky top-0 z-50 bg-[#0a0c10]/80 backdrop-blur-xl p-6 border-b border-white/5 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:()=>a.back(),className:"size-10 bg-gray-900 rounded-xl flex items-center justify-center border border-white/5",children:(0,b.jsx)(f.ChevronLeft,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-black tracking-tight",children:"Carga Masiva"}),(0,b.jsx)("p",{className:"text-[10px] text-[#135bec] font-black uppercase tracking-widest",children:"Excel / CSV a Supabase"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[0===h.length&&(0,b.jsxs)("button",{onClick:v,className:"flex items-center gap-2 bg-emerald-600/10 text-emerald-500 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest border border-emerald-500/20 hover:bg-emerald-600/20 transition-all",children:[(0,b.jsx)(g.FileText,{size:14}),"Plantilla"]}),h.length>0&&!s&&(0,b.jsxs)("button",{onClick:()=>r([]),className:"text-rose-500 font-bold text-xs flex items-center gap-2",children:[(0,b.jsx)(m.Trash2,{size:16})," Limpiar"]})]})]}),(0,b.jsx)("main",{className:"p-6",children:0===h.length?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{onClick:()=>u.current?.click(),className:"py-20 border-2 border-dashed border-white/10 rounded-[3rem] flex flex-col items-center justify-center bg-gray-900/20 cursor-pointer hover:border-[#135bec]/50 transition-all hover:bg-[#135bec]/5 group",children:[(0,b.jsx)("div",{className:"size-20 rounded-3xl bg-gray-900 flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-2xl",children:(0,b.jsx)(i,{className:"text-[#135bec]",size:36})}),(0,b.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Sube tu Excel de Servicios"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 max-w-xs text-center px-4 font-medium",children:"Arr規範 tu archivo o haz clic para seleccionar. El sistema detectará automáticamente clientes, equipos y fallas."}),(0,b.jsx)("input",{type:"file",ref:u,onChange:a=>{let b=a.target.files?.[0];if(!b)return;let c=new FileReader;c.onload=a=>{try{let b=a.target?.result,c=q.read(b,{type:"binary"}),d=c.Sheets[c.SheetNames[0]],e=q.utils.sheet_to_json(d).map((a,b)=>({id:`row-${b}`,national_id:String(a.Cedula||a.ID||a.Identificacion||""),full_name:String(a.Nombre||a["Nombre Completo"]||""),phone:String(a.Telefono||""),address:String(a.Direccion||""),equipment_type:String(a.Tipo||a.Articulo||"Otros"),brand:String(a.Marca||"Genérica"),serial_number:String(a.Serial||a.Serie||`SN-AUTO-${Math.random().toString(36).substring(7)}`),reported_issue:String(a.Falla||a.Problema||"Revisión General"),service_type:String(a["Tipo Servicio"]||"REPAIR"),priority:String(a.Prioridad||"NORMAL").toUpperCase(),date:a.Fecha||new Date().toISOString().split("T")[0],time:a.Hora||"09:00",status:"idle"})).filter(a=>a.full_name&&a.national_id);r(e)}catch(a){alert("Error al leer el archivo: "+a.message)}},c.readAsBinaryString(b)},className:"hidden",accept:".xlsx, .xls, .csv"})]}),(0,b.jsxs)("button",{onClick:v,className:"w-full py-5 rounded-[2rem] border border-white/5 bg-gray-900/40 flex items-center justify-center gap-3 hover:bg-gray-900 transition-all group",children:[(0,b.jsx)("div",{className:"size-10 rounded-xl bg-emerald-500/10 flex items-center justify-center text-emerald-500 group-hover:scale-110 transition-transform",children:(0,b.jsx)(g.FileText,{size:20})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"text-sm font-bold",children:"¿No tienes la plantilla?"}),(0,b.jsx)("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Descarga el modelo oficial aquí"})]})]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6 bg-indigo-600/10 border border-indigo-500/20 p-4 rounded-3xl",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm font-bold",children:[h.length," registros detectados"]}),(0,b.jsx)("p",{className:"text-[10px] text-gray-400 font-bold uppercase tracking-widest",children:"Listo para importar a la lista"})]}),(0,b.jsxs)("button",{onClick:w,disabled:s,className:"bg-[#135bec] text-white px-6 py-3 rounded-2xl font-black text-xs uppercase tracking-widest flex items-center gap-2 shadow-xl shadow-[#135bec]/20",children:[s?(0,b.jsx)("div",{className:"size-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,b.jsx)(l,{size:16}),"Iniciar Proceso"]})]}),(0,b.jsx)("div",{className:"space-y-3",children:h.map(a=>(0,b.jsxs)("div",{className:`p-5 rounded-[2rem] border transition-all ${"success"===a.status?"bg-emerald-500/10 border-emerald-500/30":"error"===a.status?"bg-rose-500/10 border-rose-500/30":"processing"===a.status?"bg-indigo-500/10 border-indigo-500 animate-pulse":"bg-gray-900/40 border-white/5"}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`size-12 rounded-xl flex items-center justify-center font-black ${"success"===a.status?"bg-emerald-500 text-white":"bg-gray-800 text-gray-400"}`,children:(0,b.jsx)(o.User,{size:20})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-sm",children:a.full_name}),(0,b.jsx)("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:a.national_id})]})]}),"success"===a.status&&(0,b.jsx)(j.CheckCircle2,{className:"text-emerald-500",size:20}),"error"===a.status&&(0,b.jsx)(k.AlertCircle,{className:"text-rose-500",size:20})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,b.jsxs)("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 text-[10px] flex items-center gap-2",children:[(0,b.jsx)(p.Wrench,{size:12,className:"text-[#135bec]"}),(0,b.jsxs)("span",{className:"font-bold",children:[a.equipment_type," ",a.brand]})]}),(0,b.jsxs)("div",{className:"bg-black/20 rounded-xl p-3 border border-white/5 text-[10px] flex items-center gap-2",children:[(0,b.jsx)(n.Calendar,{size:12,className:"text-rose-500"}),(0,b.jsxs)("span",{className:"font-bold",children:[a.date," ",a.time]})]})]}),(0,b.jsxs)("p",{className:"text-[11px] text-gray-400 line-clamp-2 px-1 mb-2",children:[(0,b.jsx)("span",{className:"font-black text-gray-600 uppercase tracking-tighter mr-2",children:"Falla:"}),a.reported_issue]}),a.error&&(0,b.jsxs)("p",{className:"text-[9px] text-rose-500 font-bold mt-2 bg-rose-500/10 p-2 rounded-lg",children:["Error: ",a.error]})]},a.id))})]})})]})}a.s(["default",()=>r],91113)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__48065c6d._.js.map